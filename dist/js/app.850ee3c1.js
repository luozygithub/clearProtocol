(function(){var t={46700:function(t,e,a){var s={"./af":63906,"./af.js":63906,"./ar":40902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":20299,"./ar-kw.js":20299,"./ar-ly":96825,"./ar-ly.js":96825,"./ar-ma":66379,"./ar-ma.js":66379,"./ar-sa":87700,"./ar-sa.js":87700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":40902,"./az":76043,"./az.js":76043,"./be":7936,"./be.js":7936,"./bg":34078,"./bg.js":34078,"./bm":14014,"./bm.js":14014,"./bn":29554,"./bn-bd":17114,"./bn-bd.js":17114,"./bn.js":29554,"./bo":6529,"./bo.js":6529,"./br":65437,"./br.js":65437,"./bs":19647,"./bs.js":19647,"./ca":59951,"./ca.js":59951,"./cs":26113,"./cs.js":26113,"./cv":37965,"./cv.js":37965,"./cy":35858,"./cy.js":35858,"./da":33515,"./da.js":33515,"./de":62831,"./de-at":6263,"./de-at.js":6263,"./de-ch":51127,"./de-ch.js":51127,"./de.js":62831,"./dv":4510,"./dv.js":4510,"./el":68616,"./el.js":68616,"./en-au":24595,"./en-au.js":24595,"./en-ca":73545,"./en-ca.js":73545,"./en-gb":79609,"./en-gb.js":79609,"./en-ie":43727,"./en-ie.js":43727,"./en-il":93302,"./en-il.js":93302,"./en-in":46305,"./en-in.js":46305,"./en-nz":39128,"./en-nz.js":39128,"./en-sg":84569,"./en-sg.js":84569,"./eo":50650,"./eo.js":50650,"./es":26358,"./es-do":64214,"./es-do.js":64214,"./es-mx":38639,"./es-mx.js":38639,"./es-us":30232,"./es-us.js":30232,"./es.js":26358,"./et":47279,"./et.js":47279,"./eu":15515,"./eu.js":15515,"./fa":27981,"./fa.js":27981,"./fi":37090,"./fi.js":37090,"./fil":79208,"./fil.js":79208,"./fo":2799,"./fo.js":2799,"./fr":23463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":52848,"./fr-ch.js":52848,"./fr.js":23463,"./fy":41468,"./fy.js":41468,"./ga":88163,"./ga.js":88163,"./gd":2898,"./gd.js":2898,"./gl":76312,"./gl.js":76312,"./gom-deva":20682,"./gom-deva.js":20682,"./gom-latn":49178,"./gom-latn.js":49178,"./gu":31400,"./gu.js":31400,"./he":52795,"./he.js":52795,"./hi":17009,"./hi.js":17009,"./hr":46506,"./hr.js":46506,"./hu":69565,"./hu.js":69565,"./hy-am":93864,"./hy-am.js":93864,"./id":5626,"./id.js":5626,"./is":36649,"./is.js":36649,"./it":90151,"./it-ch":95348,"./it-ch.js":95348,"./it.js":90151,"./ja":79830,"./ja.js":79830,"./jv":33751,"./jv.js":33751,"./ka":63365,"./ka.js":63365,"./kk":85980,"./kk.js":85980,"./km":99571,"./km.js":99571,"./kn":25880,"./kn.js":25880,"./ko":16809,"./ko.js":16809,"./ku":96773,"./ku.js":96773,"./ky":65505,"./ky.js":65505,"./lb":50553,"./lb.js":50553,"./lo":51237,"./lo.js":51237,"./lt":91563,"./lt.js":91563,"./lv":61057,"./lv.js":61057,"./me":96495,"./me.js":96495,"./mi":83096,"./mi.js":83096,"./mk":43874,"./mk.js":43874,"./ml":46055,"./ml.js":46055,"./mn":87747,"./mn.js":87747,"./mr":17113,"./mr.js":17113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":14532,"./mt.js":14532,"./my":4655,"./my.js":4655,"./nb":56961,"./nb.js":56961,"./ne":2512,"./ne.js":2512,"./nl":48448,"./nl-be":72936,"./nl-be.js":72936,"./nl.js":48448,"./nn":49031,"./nn.js":49031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":30118,"./pa-in.js":30118,"./pl":93448,"./pl.js":93448,"./pt":33518,"./pt-br":62447,"./pt-br.js":62447,"./pt.js":33518,"./ro":70817,"./ro.js":70817,"./ru":10262,"./ru.js":10262,"./sd":58990,"./sd.js":58990,"./se":43842,"./se.js":43842,"./si":37711,"./si.js":37711,"./sk":80756,"./sk.js":80756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":40732,"./sr-cyrl":75713,"./sr-cyrl.js":75713,"./sr.js":40732,"./ss":99455,"./ss.js":99455,"./sv":69770,"./sv.js":69770,"./sw":80959,"./sw.js":80959,"./ta":36459,"./ta.js":36459,"./te":25302,"./te.js":25302,"./tet":67975,"./tet.js":67975,"./tg":71294,"./tg.js":71294,"./th":2385,"./th.js":2385,"./tk":24613,"./tk.js":24613,"./tl-ph":58668,"./tl-ph.js":58668,"./tlh":58190,"./tlh.js":58190,"./tr":74506,"./tr.js":74506,"./tzl":63440,"./tzl.js":63440,"./tzm":69852,"./tzm-latn":42350,"./tzm-latn.js":42350,"./tzm.js":69852,"./ug-cn":70730,"./ug-cn.js":70730,"./uk":40099,"./uk.js":40099,"./ur":72100,"./ur.js":72100,"./uz":96002,"./uz-latn":26322,"./uz-latn.js":26322,"./uz.js":96002,"./vi":14207,"./vi.js":14207,"./x-pseudo":24674,"./x-pseudo.js":24674,"./yo":10570,"./yo.js":10570,"./zh-cn":73644,"./zh-cn.js":73644,"./zh-hk":22591,"./zh-hk.js":22591,"./zh-mo":89503,"./zh-mo.js":89503,"./zh-tw":88080,"./zh-tw.js":88080};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id=46700},65946:function(t,e){"use strict";e["Z"]={vault:"0xE4729489108198EEd4F073470c07eB7fA8650980",usdt:"0x30D2E25E4F93D26447F5228bfCE48977bC9C6FB5",CLP:"0xBA9B765BB35604E7b59EE11ced438CAe91c66Fa8",vaultUtil:"0xF4F498d3dFA948c691fCe881fEE352a3ad02762B"}},42878:function(t,e,a){"use strict";var s=a(36369),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"layout"},[e("ClearProtocolMenu"),e("div",{staticClass:"content",style:"left:"+(t.collapsed?66:200)+"px;width:calc(100vw - "+(t.collapsed?66:200)+"px)"},[e("CloearProtocolHeader"),e("router-view")],1)],1)])},i=[],o=(a(57658),function(){var t=this,e=t._self._c;return e("a-layout-sider",{staticClass:"menu",class:{isCollapsed:t.collapsed},style:{overflow:"auto",height:"100vh",position:"fixed",left:0,zIndex:100,background:"#0E1D51"},attrs:{collapsed:t.collapsed,collapsedWidth:66,width:200}},[e("div",{staticClass:"logo-box"},[e("img",{directives:[{name:"show",rawName:"v-show",value:!t.collapsed,expression:"!collapsed"}],staticClass:"logo",attrs:{src:a(69574),alt:""}}),e("img",{directives:[{name:"show",rawName:"v-show",value:t.collapsed,expression:"collapsed"}],staticClass:"logo-s",attrs:{src:a(87461),alt:""}})]),e("a-menu",{attrs:{"default-selected-keys":["1"],"default-open-keys":["sub1"],mode:"inline",theme:"dark","inline-collapsed":t.collapsed}},[e("a-menu-item",{key:"2",on:{click:function(e){return t.$router.push({path:"/"})}}},[e("a-icon",{staticClass:"menu-item-icon",attrs:{type:"appstore"}}),e("span",{staticClass:"menu-item-name"},[t._v("Options")])],1),e("a-menu-item",{key:"1",on:{click:function(e){return t.$router.push({path:"/note"})}}},[e("a-icon",{staticClass:"menu-item-icon",attrs:{type:"pie-chart"}}),e("span",{staticClass:"menu-item-name"},[t._v("Notes")])],1),e("a-menu-item",{key:"3",staticClass:"line2",on:{click:function(e){return t.$router.push({path:"/"})}}},[e("div",{staticClass:"menu-item-box"},[e("a-icon",{staticClass:"menu-item-icon",attrs:{type:"inbox"}}),e("div",{staticClass:"menu-item-name"},[t._v(" Perpetual"),e("br"),t._v(" Futures ")])],1)]),e("a-menu-item",{key:"4",on:{click:function(e){return t.$router.push({path:"/overview"})}}},[e("a-icon",{staticClass:"menu-item-icon",attrs:{type:"pie-chart"}}),e("span",{staticClass:"menu-item-name"},[t._v("Overview")])],1)],1)],1)}),r=[],l={name:"ClearProtocolMenu",data(){return{}},computed:{collapsed(){return this.$store.state.collapsed}},methods:{toggleCollapsed(){this.$store.commit("SET_COLLAPSED",this.collapsed)}}},c=l,u=a(1001),d=(0,u.Z)(c,o,r,!1,null,"49ab3413",null),p=d.exports,m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("div",{staticClass:"nav-list"},[e("div",{staticClass:"menu",on:{click:t.toggleCollapsed}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.collapsed,expression:"$store.state.collapsed"}],attrs:{src:a(28550),alt:""}}),e("svg",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.collapsed,expression:"!$store.state.collapsed"}],staticClass:"icon",attrs:{t:"1678326899021",viewBox:"0 0 1109 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2298",width:"20",height:"14"}},[e("path",{attrs:{d:"M0 0h1109.333v170.667H0V0z m0 426.667h682.667v170.666H0V426.667z m0 426.666h1109.333V1024H0V853.333z",fill:"#0e1d51","p-id":"2299"}})])]),e("div",{staticClass:"nav-item",class:{active:"/"==t.$route.path},on:{click:function(e){return t.$router.push("/")}}},[t._v(" Futures ")]),e("div",{staticClass:"nav-item",class:{active:"/Pool"==t.$route.path},on:{click:function(e){return t.$router.push("/Pool")}}},[t._v(" Pool ")])]),e("div",{staticClass:"operate-box"},[e("div",{staticClass:"faucet-btn operate",on:{click:t.toFaucet}},[t.currentTheme?e("img",{staticClass:"icon",attrs:{src:a(54334),width:"22",height:"22",alt:""}}):e("img",{staticClass:"icon",attrs:{src:a(42777),width:"22",height:"22",alt:""}}),e("span",{staticClass:"pd-l8"},[t._v("Faucet")])]),e("a-dropdown",{attrs:{trigger:["click"]}},[e("button",{staticClass:"operate choose-chain",on:{click:t=>t.preventDefault()}},[t._v(" "+t._s(t.curChainName)+" "),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",{key:"1",on:{click:function(e){t.chainId=421613,t.chooseChain()}}},[t._v(" Arbitrum Goerli ")])],1)],1),e("Wallet")],1)])},h=[],v=a(63822),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"connectWallet"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.isConnected,expression:"isConnected"}],staticClass:"operate connect"},[t.wrongNetWork?[e("div",{on:{click:function(e){return t.switchNetwork(t.desireChainId)}}},[t._v(" Wrong Network")])]:[e("a-popover",{attrs:{placement:"bottomRight"}},[e("a-button",{staticClass:"account-button",attrs:{loading:t.connectedLoading}},[t._v(" "+t._s(t._f("showAddress")(t.account))+" ")]),e("template",{slot:"content"},[e("p",{staticClass:"color-0E1D51 ts-16 cursor",on:{click:t.disConnect}},[e("a-icon",{attrs:{type:"disconnect"}}),e("span",{staticClass:"pd-l8"},[t._v("Disconnect wallet")])],1)])],2)]],2),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.isConnected,expression:"!isConnected"}],staticClass:"operate connect",attrs:{size:"mini"},on:{click:function(e){t.isWalletModal=!0}}},[e("span",[t._v(" Connect Wallet ")])]),e("a-modal",{staticClass:"walletDialog",attrs:{title:"Connect your wallet",footer:null,width:400},model:{value:t.isWalletModal,callback:function(e){t.isWalletModal=e},expression:"isWalletModal"}},[e("div",{staticClass:"walletDialog-content"},[e("a-row",{staticStyle:{"z-index":"1001",cursor:"pointer",padding:"0 28px","margin-bottom":"26px"},attrs:{type:"flex",justify:"space-between"}},[e("div",{staticClass:"connect-item",on:{click:function(e){return e.preventDefault(),t.connectWallet(1)}}},[e("a-col",[e("img",{attrs:{src:a(99171),height:"30",width:"30"}})]),e("a-col",{staticClass:"color-0E1D51"},[t._v(" MetaMask")])],1)]),e("p",{staticClass:"walletDialog-p mg-t36"},[t._v("Disclaimer: Wallets are provided by External Providers and by selecting you agree to Terms of those Providers.")])],1)])],1)},f=[],y=a(21832),w=a.n(y),C=a(10252);let b=null;function _(t){return new Promise((function(e,a){let s=window.web3;if(t){b=t;let a=new(w())(t);e({web3(){return a}})}else if("undefined"!==typeof s){let t=new(w())(s.currentProvider);b=s.currentProvider,e({web3(){return t}})}else a(new Error("Unable to connect"))})).then((t=>new Promise((function(e){const a=t.web3();let s={isInjected:!1,web3Instance:t,networkId:b.networkId,account:b.accounts&&b.accounts.length>0?b.accounts[0]:null};try{a.eth.net.getId().then((t=>{s.networkId=t,a.eth.getCoinbase().then((t=>{t&&(s.account=t),console.log(s),a.eth.getBalance(s.account).then((t=>{s.ethBalance=t,e(s)}))}))}))}catch(n){console.log(n),C.Z.error(n),e(s)}}))))}var k=_;const S={"0x61":{chainId:"0x61",chainType:"2",chainName:"Binance Smart Chain Testnet",shortName:"BSC",rpcUrls:["https://data-seed-prebsc-2-s3.binance.org:8545/"],blockExplorerUrls:["https://testnet.bscscan.com"],nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},payToken:{name:"USDC",address:"0x16227D60f7a0e586C66B005219dfc887D13C9531",decimals:6}},"0x66eed":{chainId:"0x66eed",chainName:"Arbitrum goerli",shortName:"goerli ARB",chainType:"3",rpcUrls:["https://goerli-rollup.arbitrum.io/rpc"],blockExplorerUrls:["https://testnet.arbiscan.io"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},payToken:{name:"USDT",address:"0x0d88a6b8bF9C6E97373FB9C60E2eb2B4865d021f",decimals:18}}};var T=a(33671),N={name:"ConnectWallet",data(){return{desireChainId:"0x66eed",connectedLoading:!1,networkObj:S,curChain:"bscTest",connectIdx:0,connectArr:["","MetaMask","WalletConnect","Fortmatic"],isShowConnectStatus:!1,isShowConnect:!1,isWalletModal:!1,wrongNetWork:!1}},computed:{...(0,v.Se)(["isConnected","account"]),chainId(){return this.$store.state.app.chainId}},filters:{showAddress:function(t){return t.substring(0,6)+"..."+t.substring(38,42)}},watch:{chainId(t){t==this.desireChainId&&(this.wrongNetWork=!1),this.wrongNetWork=421613!=t}},created(){const t=localStorage.getItem("curChain");t&&t.length>0&&(this.curChain=t)},mounted(){this.connectWallet(1)},methods:{async switchNetwork(t){try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}catch(e){try{let e=[{chainId:this.networkObj[t].chainId,chainName:this.networkObj[t].chainName,rpcUrls:this.networkObj[t].rpcUrls,nativeCurrency:this.networkObj[t].nativeCurrency,blockExplorerUrls:this.networkObj[t].blockExplorerUrls?this.networkObj[t].blockExplorerUrls:null}];await window.ethereum.request({method:"wallet_addEthereumChain",params:e}),this.connectWallet(1)}catch(a){console.log({addError:a})}}},async connectWallet(t){if(this.connectIdx=t,1==t){"undefined"==typeof window.ethereum&&T.ZP.error("install MetaMask first!"),await window.ethereum.enable(),window.ethereum.on("accountsChanged",(t=>{this.$store.commit("app/SET_ACCOUNT",t[0])}));try{this.registerWeb3().then((()=>{this.isWalletModal=!1}))}catch(e){console.log(e),window.ethereum.request({method:"eth_requestAccounts"}).then((t=>{this.$store.commit("app/SET_ACCOUNT",t[0])}))}this.isWalletModal=!1,this.connectedLoading=!1}},registerWeb3(t){return new Promise((e=>{try{k(t).then((t=>{this.$store.commit("app/SET_ACCOUNT",t.account),this.$store.commit("app/SET_ISCONNECT",!0),this.$store.commit("app/SET_Balance",t.ethBalance),this.$store.commit("app/SET_Web3",t.web3Instance.web3()),e(t)}))}catch(a){console.log(a)}}))},showWallet(){this.isConnected?this.isShowConnectStatus=!1:this.isShowConnect=!0},disConnect(){1!=this.connectIdx&&(this.provider&&this.provider.disconnect(),this.isShowConnectStatus=!1),this.$store.commit("app/SET_ACCOUNT",""),this.$store.commit("app/SET_ISCONNECT",!1),this.$store.commit("app/SET_Balance",0),this.$store.commit("app/SET_Web3",null)}}},P=N,I=(0,u.Z)(P,g,f,!1,null,"3c936bb9",null),x=I.exports,O={name:"CloearProtocolHeader",components:{Wallet:x},data(){return{chainId:0,curChainName:"Unsupported"}},computed:{...(0,v.rn)({currentTheme:t=>t.currentTheme})},methods:{toFaucet(){window.open("/faucet","_blank")},toggleCollapsed(){this.collapsed=!this.collapsed,this.$store.commit("SET_COLLAPSED",this.collapsed)},async chooseChain(){try{if(window.ethereum){const t=await window.ethereum.request({method:"eth_chainId"});if(t!=this.chainId){const t=await window.ethereum.request({method:"wallet_getPermissions"}),e=t.some((t=>"eth_chainId"===t.parentCapability&&t.caveats.some((t=>{const e="chainId"===t.type&&t.value;return console.log(e),e===this.chainId}))));e?await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x"+parseInt(this.chainId).toString(16).toString()}]}):"97"==this.chainId?await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x"+parseInt(this.chainId).toString(16),chainName:"Binance Smart Chain Testnet",nativeCurrency:{name:"tBNB",symbol:"tBNB",decimals:18},rpcUrls:["https://endpoints.omniatech.io/v1/bsc/testnet/public"],blockExplorerUrls:["https://testnet.bscscan.com"]}]}):await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x"+this.chainId.toString(16),chainName:"Arbitrum Goerli",rpcUrls:["https://goerli-rollup.arbitrum.io/rpc"],nativeCurrency:{symbol:"AGOR",name:"AGOR",decimals:18},blockExplorerUrls:["https://goerli-rollup-explorer.arbitrum.io"]}]})}}}catch(t){console.log(t)}}},watch:{chainId(t){this.curChainName=421613==t?"Arbitrum Goerli":97==t?"Binance Smart Chain Testnet":"Unsupported"}},async mounted(){if(window.ethereum){const t=await window.ethereum.request({method:"eth_chainId"});this.$store.dispatch("app/updateChainId",t),421613==parseInt(t).toString(10)?this.curChainName="Arbitrum Goerli":97==parseInt(t).toString(10)&&(this.curChainName="Binance Smart Chain Testnet");let e=this;setTimeout((async()=>{const t=await window.ethereum.request({method:"eth_chainId"});this.$store.dispatch("app/updateChainId",t),421613==parseInt(t).toString(10)?e.curChainName="Arbitrum Goerli":97==parseInt(t).toString(10)&&(e.curChainName="Binance Smart Chain Testnet")}),100),window.ethereum.on("chainChanged",(t=>{this.chainId=parseInt(t).toString(10),this.$store.dispatch("app/updateChainId",t)}))}}},M=O,A=(0,u.Z)(M,m,h,!1,null,"91dab4a0",null),j=A.exports,F={name:"APP",components:{ClearProtocolMenu:p,CloearProtocolHeader:j},data(){return{}},computed:{collapsed(){return this.$store.state.collapsed}},methods:{}},D=F,E=(0,u.Z)(D,n,i,!1,null,"35ff10d2",null),z=E.exports,R=a(72631),$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home",style:"left:"+(t.collapsed?66:200)+"px;width:calc(100vw - "+(t.collapsed?66:200)+"px)"},[e("a-spin",{attrs:{spinning:t.isLoading}},[e("div",{staticClass:"content-box"},[e("div",{staticClass:"left-content-box"},[e("div",{staticClass:"left-content-container"},[e("div",{staticClass:"left-header"},[e("a-dropdown",{scopedSlots:t._u([{key:"overlay",fn:function(){return[e("a-menu",{on:{click:t.handleMenuClick}},[e("a-menu-item",{key:"1"},[e("div",{staticClass:"coin-info"},[e("div",{staticClass:"coin-name"},[e("svg",{staticClass:"icon",attrs:{t:"1677824350805",viewBox:"0 0 1029 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2818",width:"20",height:"20"}},[e("path",{attrs:{d:"M1024.727025 511.98976c0 282.771945-229.217816 511.98976-511.98976 511.98976-282.766825 0-511.98976-229.217816-511.98976-511.98976 0-282.766825 229.222936-511.98976 511.98976-511.98976 282.771945 0 511.98976 229.222936 511.98976 511.98976",fill:"#F7931A","p-id":"2819"}}),e("path",{attrs:{d:"M637.048379 661.623888a55.842723 55.842723 0 0 1-27.145697 33.417571 55.858083 55.858083 0 0 1-42.827943 4.444071l-144.181437-42.940581 32.122238-107.840403 144.171196 42.945701h0.00512c29.726125 8.852303 46.713946 40.242395 37.856523 69.973641m48.628787-221.00038a55.929761 55.929761 0 0 1 4.438952 42.833063c-8.857423 29.721006-40.262875 46.698586-69.973641 37.861643h-0.00512l-144.176316-42.940582 32.111998-107.840403 144.181436 42.940581a55.888802 55.888802 0 0 1 33.422691 27.145698m64.54143-34.917702c-16.48095-30.458271-43.836563-52.678626-77.01862-62.560029l-19.076738-5.677966 26.705385-89.669887-68.519589-20.407912-26.705386 89.669887-58.49995-17.423012 26.710506-89.669886-16.414392-4.889503-66.49723-19.803763-25.742845 86.434111-81.037739-24.135197-22.870583 76.798464 81.037739 24.140317-83.254655 279.536169-81.037739-24.135197-22.870583 76.803584 81.03262 24.130077-21.723726 72.953421 16.409272 4.889502 66.49723 19.803764 22.691386-76.189196 58.638188 17.463971-22.691387 76.194316 68.243116 20.325993 22.691386-76.194316 19.209856 5.718926a130.255315 130.255315 0 0 0 37.185816 5.452691c21.247575 0 42.295474-5.278614 61.51045-15.677127 30.458271-16.48095 52.673507-43.831443 62.560028-77.023739 10.393392-34.912582 5.263255-70.777464-11.268894-100.298794 30.01284-15.661767 53.927881-42.935461 64.331513-77.863403 9.886522-33.192296 6.251395-68.243115-10.224435-98.696266",fill:"#FFFFFF","p-id":"2820"}})]),e("span",[t._v(" BTC ")]),e("span",{staticClass:"usdc"},[t._v("/USDC")])]),e("div",{staticClass:"right",class:{down:t.dealNum(t.configInfo.tokens?t.configInfo.tokens[1].chg_24h:0)<0}},[e("div",{staticClass:"price"},[t._v(" $"+t._s(t.configInfo.tokens?t.dealNum(t.configInfo.tokens[0].index_price):"")+" ")]),e("div",{staticClass:"rate"},[t._v(" "+t._s(t.configInfo.tokens?t.dealNum(t.configInfo.tokens[0].chg_24h_percent)+"%":"")+" ")])])])]),e("a-menu-item",{key:"2"},[e("div",{staticClass:"coin-info"},[e("div",{staticClass:"coin-name"},[e("svg",{staticClass:"icon",attrs:{t:"1677824451359",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3915",width:"20",height:"20"}},[e("path",{attrs:{d:"M512.099961 0.399844c282.689574 0 511.800078 229.110504 511.800078 511.800078s-229.110504 511.800078-511.800078 511.800078S0.299883 794.889496 0.299883 512.199922 229.510348 0.399844 512.099961 0.399844z",fill:"#3E5BF2","p-id":"3916"}}),e("path",{attrs:{d:"M512.199922 147.242483v510.000781l224.112456-134.34752zM512.199922 877.15736l224.112456-321.774307-224.112456 135.547052zM512.199922 147.242483v510.000781L287.987505 522.895744z",fill:"#FFFFFF","p-id":"3917"}}),e("path",{attrs:{d:"M512.199922 690.930105v186.227255L287.987505 555.383053z",fill:"#FFFFFF","p-id":"3918"}})]),e("span",[t._v(" ETH ")]),e("span",{staticClass:"usdc"},[t._v("/USDC")])]),e("div",{staticClass:"right",class:{down:t.dealNum(t.configInfo.tokens?t.configInfo.tokens[1].chg_24h:0)<0}},[e("div",{staticClass:"price"},[t._v(" $"+t._s(t.configInfo.tokens?t.dealNum(t.configInfo.tokens[1].index_price):"")+" ")]),e("div",{staticClass:"rate"},[t._v(" "+t._s(t.configInfo.tokens?t.dealNum(t.configInfo.tokens[1].chg_24h_percent)+"%":"")+" ")])])])])],1)]},proxy:!0}])},[e("a",{staticClass:"ant-dropdown-link",on:{click:function(t){t.preventDefault()}}},[e("div",{staticClass:"coin-box",staticStyle:{display:"flex"}},[e("svg",{directives:[{name:"show",rawName:"v-show",value:"BTC"==t.activeTokenName,expression:"activeTokenName=='BTC'"}],staticClass:"icon",attrs:{t:"1677824350805",viewBox:"0 0 1029 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2818",width:"20",height:"20"}},[e("path",{attrs:{d:"M1024.727025 511.98976c0 282.771945-229.217816 511.98976-511.98976 511.98976-282.766825 0-511.98976-229.217816-511.98976-511.98976 0-282.766825 229.222936-511.98976 511.98976-511.98976 282.771945 0 511.98976 229.222936 511.98976 511.98976",fill:"#F7931A","p-id":"2819"}}),e("path",{attrs:{d:"M637.048379 661.623888a55.842723 55.842723 0 0 1-27.145697 33.417571 55.858083 55.858083 0 0 1-42.827943 4.444071l-144.181437-42.940581 32.122238-107.840403 144.171196 42.945701h0.00512c29.726125 8.852303 46.713946 40.242395 37.856523 69.973641m48.628787-221.00038a55.929761 55.929761 0 0 1 4.438952 42.833063c-8.857423 29.721006-40.262875 46.698586-69.973641 37.861643h-0.00512l-144.176316-42.940582 32.111998-107.840403 144.181436 42.940581a55.888802 55.888802 0 0 1 33.422691 27.145698m64.54143-34.917702c-16.48095-30.458271-43.836563-52.678626-77.01862-62.560029l-19.076738-5.677966 26.705385-89.669887-68.519589-20.407912-26.705386 89.669887-58.49995-17.423012 26.710506-89.669886-16.414392-4.889503-66.49723-19.803763-25.742845 86.434111-81.037739-24.135197-22.870583 76.798464 81.037739 24.140317-83.254655 279.536169-81.037739-24.135197-22.870583 76.803584 81.03262 24.130077-21.723726 72.953421 16.409272 4.889502 66.49723 19.803764 22.691386-76.189196 58.638188 17.463971-22.691387 76.194316 68.243116 20.325993 22.691386-76.194316 19.209856 5.718926a130.255315 130.255315 0 0 0 37.185816 5.452691c21.247575 0 42.295474-5.278614 61.51045-15.677127 30.458271-16.48095 52.673507-43.831443 62.560028-77.023739 10.393392-34.912582 5.263255-70.777464-11.268894-100.298794 30.01284-15.661767 53.927881-42.935461 64.331513-77.863403 9.886522-33.192296 6.251395-68.243115-10.224435-98.696266",fill:"#FFFFFF","p-id":"2820"}})]),e("svg",{directives:[{name:"show",rawName:"v-show",value:"ETH"==t.activeTokenName,expression:"activeTokenName=='ETH'"}],staticClass:"icon",attrs:{t:"1677824451359",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3915",width:"20",height:"20"}},[e("path",{attrs:{d:"M512.099961 0.399844c282.689574 0 511.800078 229.110504 511.800078 511.800078s-229.110504 511.800078-511.800078 511.800078S0.299883 794.889496 0.299883 512.199922 229.510348 0.399844 512.099961 0.399844z",fill:"#3E5BF2","p-id":"3916"}}),e("path",{attrs:{d:"M512.199922 147.242483v510.000781l224.112456-134.34752zM512.199922 877.15736l224.112456-321.774307-224.112456 135.547052zM512.199922 147.242483v510.000781L287.987505 522.895744z",fill:"#FFFFFF","p-id":"3917"}}),e("path",{attrs:{d:"M512.199922 690.930105v186.227255L287.987505 555.383053z",fill:"#FFFFFF","p-id":"3918"}})]),t._v(" "+t._s(t.curSymbol)+" ")]),e("div",{staticClass:"contract"},[t._v(" Contract "),e("a-icon",{attrs:{type:"down"}})],1)])])],1),e("div",{staticClass:"left-content"},[e("div",{staticClass:"flex-box"},[e("button",{staticClass:"operate buy",class:{active:0==t.operateNav},on:{click:function(e){t.operateNav=0,t.amount=void 0,t.usdcAmount=void 0}}},[t._v(" Buy (Long) ")]),e("button",{staticClass:"operate sell",class:{active:1==t.operateNav},on:{click:function(e){t.operateNav=1,t.amount=void 0,t.usdcAmount=void 0}}},[t._v(" Sell (Short) ")])]),e("div",{staticClass:"left-content-item"},[e("div",{staticClass:"box-title"},[t._v("Amount")]),e("div",{staticClass:"input-box"},[e("div",{staticClass:"input-part"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",step:"any",placeholder:"0.0000"},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.updateUSDCAmount]}}),e("span",[t._v(t._s(t.activeTokenName))])]),e("div",{staticClass:"input-part"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.usdcAmount,expression:"usdcAmount"}],attrs:{type:"number",step:"any",placeholder:"0.0000"},domProps:{value:t.usdcAmount},on:{input:[function(e){e.target.composing||(t.usdcAmount=e.target.value)},t.updateAmount]}}),e("span",[t._v("USDC")])])])]),e("div",{staticClass:"left-content-item"},[e("div",{staticClass:"box-title"},[t._v(" Leverage ")]),e("div",{staticClass:"progress-box",staticStyle:{position:"relative"}},[e("div",{staticClass:"slider-box"},[e("a-slider",{staticStyle:{position:"relative",width:"100%"},attrs:{min:2,max:50,tipFormatter:t.formatTip,tooltipPlacement:"bottom"},model:{value:t.slideValue,callback:function(e){t.slideValue=e},expression:"slideValue"}}),e("div",{staticClass:"slider-lines",staticStyle:{"pointer-events":"none","--value":"calc((100% / max) * value)"}},[e("div",{staticClass:"slider-line",class:{active:t.slideValue>=4.8},style:{left:"10%"}}),e("div",{staticClass:"slider-line",class:{active:t.slideValue>=9.6},style:{left:"20%"}}),e("div",{staticClass:"slider-line",class:{active:t.slideValue>=4.8*3},style:{left:"30%"}}),e("div",{staticClass:"slider-line",class:{active:t.slideValue>=24},style:{left:"40%"}}),e("div",{staticClass:"slider-line",class:{active:t.slideValue>=4.8*6},style:{left:"50%"}}),e("div",{staticClass:"slider-line",class:{active:t.slideValue>=33.6},style:{left:"60%"}}),e("div",{staticClass:"slider-line",class:{active:t.slideValue>=38.4},style:{left:"70%"}}),e("div",{staticClass:"slider-line",class:{active:t.slideValue>=4.8*9},style:{left:"80%"}}),e("div",{staticClass:"slider-line",class:{active:t.slideValue>=48},style:{left:"90%"}})])],1),e("div",{staticClass:"reset",on:{click:function(e){t.slideValue=2}}},[t._v(" Reset ")]),e("div",{staticClass:"multi"},[t._v(" "+t._s(t.slideValue)+"x ")])])])]),e("div",{staticClass:"left-bottom"},[e("div",{staticClass:"left-content-item"},[e("div",{staticClass:"box-title"},[t._v(" Transaction ")]),e("div",{staticClass:"transaction-info"},[e("div",{staticClass:"flex-box"},[e("div",{staticClass:"name"},[t._v(" Entry Price ")]),e("div",{staticClass:"value"},[t._v(" $"+t._s(t.dealNum(t.coinInfo.index_price))+" ")])]),e("div",{staticClass:"flex-box"},[e("div",{staticClass:"name"},[t._v(" Est. Liquidation Price ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.dealNum(t.liquidationPrice))+" ")])]),e("div",{staticClass:"flex-box"},[e("div",{staticClass:"name"},[t._v(" Fee ")]),e("div",{staticClass:"value"},[t._v(" $"+t._s(t.feeRate&&t.usdcAmount?t.dealNum(t.feeRate*t.usdcAmount):0)+" ")])]),e("div",{staticClass:"flex-box"},[e("div",{staticClass:"name"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.payValue>0,expression:"payValue>0"}]},[t._v("Income Amount")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.payValue<=0,expression:"payValue<=0"}]},[t._v("Pay Amount ")])]),e("div",{staticClass:"value"},[t._v(" $"+t._s(t.userPayAmount)+" ")])])])]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.usdcAllowance<10||t.usdcAllowance<t.amount,expression:"usdcAllowance<10||usdcAllowance<amount"}],staticClass:"operate approve",class:{sell:1==t.operateNav},on:{click:t.approve}},[t._v(" Approve ")]),e("a-button",{directives:[{name:"show",rawName:"v-show",value:t.usdcAllowance>10||t.usdcAllowance>t.amount,expression:"usdcAllowance>10||usdcAllowance>amount"}],staticClass:"operate trade",class:{active:t.tradeActive,sell:1==t.operateNav},attrs:{loading:t.tradeOnloading},on:{click:t.trade}},[t._v(" Trade ")])],1)])]),e("div",{staticClass:"right-content-box"},[e("div",{staticClass:"right-part1"},[e("div",{staticClass:"price",class:{down:t.dealNum(t.coinInfo.chg_24h_percent)<0}},[t._v(" "+t._s(t.dealNum(t.tokenPriceMap[t.coinInfo.contract_address]))+" ")]),e("div",{staticClass:"funding"},[e("div",{staticClass:"name"},[t._v(" Funding Rate / Next Funding ")]),e("div",{staticClass:"value"},[e("div",{staticClass:"rate"},[t._v(" "+t._s(t.coinInfo.funding_rate?t.dealNum(t.coinInfo.funding_rate[this.operateNav]):0)+"% ")]),e("div",{staticClass:"time"},[t._v(" "+t._s(t.countdown)+" ")])])]),e("div",{staticClass:"change"},[e("div",{staticClass:"name"},[t._v(" 24h Change ")]),e("div",{staticClass:"value",class:{down:t.dealNum(t.coinInfo.chg_24h_percent)<0}},[t._v(" "+t._s(t.dealNum(t.coinInfo.chg_24h))+" "+t._s(t.dealNum(t.coinInfo.chg_24h_percent))+"% ")])])]),e("div",{staticClass:"right-part2"},[e("div",{style:{height:t.widgetHeight+"px"},attrs:{id:t.widgetId}})]),e("VaultRecord",{ref:"vaultRR",attrs:{configInfo:t.configInfo,feeRate:t.feeRate,"coin-info":t.coinInfo,isShowTempPosition:t.isShowTempPosition,activeTokenName:t.activeTokenName,positionArr:t.isShowTempPosition?t.tempPositionArr:t.positionArr},on:{updatePosition:t.getPositionData}})],1)])])],1)},B=[],L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"vault-record"},[e("a-spin",{attrs:{spinning:t.isLoading}},[e("div",{staticClass:"right-part3"},[e("div",{staticClass:"right-part3-nav"},[e("div",{staticClass:"nav-item",class:{active:0==t.activeNav},on:{click:function(e){t.activeNav=0}}},[t._v(" Positions ")]),e("div",{staticClass:"nav-item",class:{active:1==t.activeNav},on:{click:function(e){t.activeNav=1}}},[t._v(" Close Positions ")]),e("div",{staticClass:"nav-item",class:{active:2==t.activeNav},on:{click:function(e){t.activeNav=2}}},[t._v(" Action History ")]),e("div",{staticClass:"nav-item",class:{active:3==t.activeNav},on:{click:function(e){t.activeNav=3}}},[t._v(" Funding Rate ")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.activeNav,expression:"activeNav==0"}],staticClass:"nav1-content"},[e("div",{staticClass:"table-header"},[e("div",{staticClass:"col"},[t._v(" Contract ")]),e("div",{staticClass:"col"},[t._v(" Side ")]),e("div",{staticClass:"col"},[t._v(" Size ")]),e("div",{staticClass:"col"},[t._v(" Leverage ")]),e("div",{staticClass:"col"},[t._v(" Entry Price ")]),e("div",{staticClass:"col"},[t._v(" Liquidation Price ")]),e("div",{staticClass:"col"},[t._v(" Margin/Margin Ratio ")]),e("div",{staticClass:"col"},[t._v(" Unrealized PNL ")]),e("div",{staticClass:"col"},[t._v(" Actions ")])]),t._l(t.positionArr,(function(a,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:parseFloat(a.size)>0,expression:"parseFloat(item.size)>0"}],key:s,staticClass:"row",class:{blink:t.isShowTempPosition&&t.activeTokenName==a.name}},[e("div",{staticClass:"col"},[t._v(" "+t._s(a.name)+"/USDC ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"side",class:{down:1!=a.direction}},[t._v(" "+t._s(1==a.direction?"Long":"Short")+" ")])]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealD6Num(a.size))+" ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(a.leverage)+"x ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealNum(a.average_price))+" ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.getLQP(a))+" ")]),e("div",{staticClass:"col"},[e("span",[t._v(" "+t._s(t.getMargin(a))+"/"+t._s(t.marginRatio(a))+"% ")])]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.getPNL(a))+" ")]),e("div",{staticClass:"col operate-box"},[e("button",{staticClass:"operate",class:{onOperate:t.isShowTempPosition&&t.activeTokenName==a.name},attrs:{disabled:t.isShowTempPosition&&t.activeTokenName==a.name},on:{click:function(e){t.isShowMarginManage=!0,t.clickPosition=a}}},[t._v(" Margin Manage ")]),e("button",{staticClass:"operate",class:{onOperate:t.isShowTempPosition&&t.activeTokenName==a.name},attrs:{disabled:t.isShowTempPosition&&t.activeTokenName==a.name},on:{click:function(e){t.isShowClosePosition=!0,t.clickPosition=a}}},[t._v(" Close ")])])])}))],2),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.activeNav,expression:"activeNav==1"}],staticClass:"nav2-content"},[e("div",{staticClass:"table-header"},[e("div",{staticClass:"col"},[t._v(" Contract ")]),e("div",{staticClass:"col"},[t._v(" Side ")]),e("div",{staticClass:"col"},[t._v(" Size ")]),e("div",{staticClass:"col"},[t._v(" Fill Price ")]),e("div",{staticClass:"col"},[t._v(" Fee ")]),e("div",{staticClass:"col"},[t._v(" Realized PNL ")]),e("div",{staticClass:"col"},[t._v(" Time ")])]),t._l(t.profitArr,(function(a,s){return e("div",{key:s,staticClass:"row"},[e("div",{staticClass:"col"},[t._v(" "+t._s(a.name)+"/USDC ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"side",class:{down:1!=a.direction}},[t._v(" "+t._s(1==a.direction?"Long":"Short")+" ")])]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealD6Num(a.size_delta))+" ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealNum(a.index_price))+" ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealFeeNum(a.transaction_fee))+" ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealD6Num(a.pnl))+" ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.formatTime(a.updated_at))+" ")])])})),e("div",{staticClass:"pagination"},[e("a-pagination",{attrs:{size:"small","show-size-changer":"",total:t.total1},on:{showSizeChange:t.onShowSizeChange1},model:{value:t.current1,callback:function(e){t.current1=e},expression:"current1"}})],1)],2),e("div",{directives:[{name:"show",rawName:"v-show",value:2==t.activeNav,expression:"activeNav==2"}],staticClass:"nav3-content"},[e("div",{staticClass:"table-header"},[e("div",{staticClass:"col"},[t._v(" Time ")]),e("div",{staticClass:"col"},[t._v(" Contract ")]),e("div",{staticClass:"col"},[t._v(" Side ")]),e("div",{staticClass:"col"},[t._v(" Size ")]),e("div",{staticClass:"col"},[t._v(" Leverage ")]),e("div",{staticClass:"col"},[t._v(" Fill Price ")]),e("div",{staticClass:"col"},[t._v(" Fee ")])]),t._l(t.recordArr,(function(a,s){return e("div",{key:s,staticClass:"row"},[e("div",{staticClass:"col"},[t._v(" "+t._s(t.formatTime(a.updated_at))+" ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(a.name)+"/USDC ")]),e("div",{staticClass:"col"},[e("div",{staticClass:"side",class:{down:1!=a.direction}},[t._v(" "+t._s(1==a.direction?"Long":"Short")+" ")])]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealD6Num(a.size_delta))+" ")]),e("div",{staticClass:"col Leverage"},[t._v(" "+t._s(t.dealNum(a.leverage))+"x ")]),e("div",{staticClass:"col Fill Price"},[t._v(" "+t._s(t.dealNum(a.index_price))+" ")]),e("div",{staticClass:"col"},[t._v(" $"+t._s(t.dealFeeNum(a.transaction_fee/10**6))+" ")])])})),e("div",{staticClass:"pagination"},[e("a-pagination",{attrs:{size:"small","show-size-changer":"",total:t.total2},on:{showSizeChange:t.onShowSizeChange2},model:{value:t.current2,callback:function(e){t.current2=e},expression:"current2"}})],1)],2),e("div",{directives:[{name:"show",rawName:"v-show",value:3==t.activeNav,expression:"activeNav==3"}],staticClass:"nav4-content"},[e("div",{staticClass:"table-header"},[e("div",{staticClass:"col"},[t._v(" Contract ")]),e("div",{staticClass:"col"},[t._v(" Funding Rate ")]),e("div",{staticClass:"col"},[t._v(" Funding Payment ")]),e("div",{staticClass:"col"},[t._v(" Time ")])]),t._l(t.fundingFeeArr,(function(a,s){return e("div",{key:s,staticClass:"row"},[e("div",{staticClass:"col"},[t._v(" "+t._s(a.name)+"/USDC ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealD6Num(a.funding_fee_rate))+"% ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(t.dealNum(a.funding_fee))+" ")]),e("div",{staticClass:"col"},[t._v(" "+t._s(a.time)+" ")])])})),e("div",{staticClass:"pagination"},[e("a-pagination",{attrs:{size:"small","show-size-changer":"",total:t.total3},on:{showSizeChange:t.onShowSizeChange3},model:{value:t.current3,callback:function(e){t.current3=e},expression:"current3"}})],1)],2)])]),e("MarginManage",{directives:[{name:"show",rawName:"v-show",value:t.isShowMarginManage,expression:"isShowMarginManage"}],attrs:{"coin-info":t.coinInfo,positionObj:t.clickPosition},on:{setLoading:t.setLoading,closeMarginManage:function(e){t.isShowMarginManage=!1},initData:t.updateData}}),e("ClosePositions",{directives:[{name:"show",rawName:"v-show",value:t.isShowClosePosition,expression:"isShowClosePosition"}],attrs:{feeRate:t.feeRate,"coin-info":t.coinInfo,positionObj:t.clickPosition},on:{closeClosePosition:function(e){t.isShowClosePosition=!1},setLoading:t.setLoading,updateData:t.updateData}})],1)},U=[],V=a(36797),Z=a.n(V);function J(t){return Z()(t).utc().format("YYYY-MM-DD HH:mm:ss")+" UTC"}var W=a(44161);const q=W.Z.create({baseURL:"https://perp.bbbing.co",timeout:5e3,headers:{"Content-Type":"application/json"}}),H=t=>q.get(`/api/user/positions?chain=1&address=${t}`),G=(t,e,a)=>q.get(`/api/user/profit?chain=1&address=${t}&start=${e}&limit=${a}`),Q=(t,e,a)=>q.get(`/api/user/record?chain=1&address=${t}&start=${e}&limit=${a}`),Y=(t,e,a)=>q.get(`/api/user/funding-fee?chain=1&address=${t}&start=${e}&limit=${a}`);var K=a(86717),X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ClosePosition"},[e("div",{staticClass:"mask"}),e("div",{staticClass:"margin-content"},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[t._v(" Close ")]),e("svg",{staticClass:"icon close",attrs:{t:"1677826899914",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5251",id:"mx_n_1677826899918",width:"14",height:"14"},on:{click:function(e){return t.$emit("closeClosePosition")}}},[e("path",{attrs:{d:"M570.514286 512l292.571428-292.571429c14.628571-14.628571 14.628571-43.885714 0-58.514285-14.628571-14.628571-43.885714-14.628571-58.514285 0l-292.571429 292.571428-292.571429-292.571428c-14.628571-14.628571-43.885714-14.628571-58.514285 0-21.942857 14.628571-21.942857 43.885714 0 58.514285l292.571428 292.571429-292.571428 292.571429c-14.628571 14.628571-14.628571 43.885714 0 58.514285 14.628571 14.628571 43.885714 14.628571 58.514285 0l292.571429-292.571428 292.571429 292.571428c14.628571 14.628571 43.885714 14.628571 58.514285 0 14.628571-14.628571 14.628571-43.885714 0-58.514285l-292.571428-292.571429z",fill:"#0E1D51","p-id":"5252"}})])]),e("div",{staticClass:"content"},[e("div",{staticClass:"info-flex"},[t._m(0),e("div",{staticClass:"right"},[e("div",{staticClass:"title"},[t._v(" Account Balance ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.dealNum(t.balance))+" ")])])]),e("div",{staticClass:"title"},[t._v(" Close ")]),e("div",{staticClass:"info-list"},[e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Margin Amount ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.positionObj.collateral?t.positionObj.collateral:0)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" PNL ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.positionObj.pnl?t.positionObj.pnl:0)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Fee ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.fee)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Balance ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.dealNum(parseFloat(t.positionObj.collateral)+parseFloat(t.positionObj.pnl)))+" ")])])]),e("a-button",{staticClass:"operate confim",attrs:{loading:t.closeOnloading},on:{click:t.trade}},[t._v(" Close ")])],1)])])},tt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[t._v(" Margin ")]),e("div",{staticClass:"value"},[t._v(" Add Margin ")])])}],et=a(91097),at=a(12873),st=a(65946);const nt=W.Z.create({baseURL:"https://perp.bbbing.co",timeout:5e3,headers:{"Content-Type":"application/json"}}),it=t=>nt.get(`/api/tran-status?trans_hash=${t}`);var ot=new K.Z,rt={name:"ClosePosition",data(){return{slipValue:void 0,amount:void 0,balance:0,closeOnloading:!1}},computed:{tokenPriceMap(){return this.$store.state.perpetual.priceMap},...(0,v.Se)(["isConnected","account"]),fee(){let t=ot.multiply(this.positionObj.size,this.tokenPriceMap[this.positionObj.index_token]);return(0,et.Z)(ot.multiply(this.feeRate,t)).toFixed(6)}},watch:{account(){this.getBalance()}},props:["positionObj","coinInfo","feeRate","updateData","setLoading"],created(){this.getBalance()},methods:{async getBalance(){if(!this.isConnected)return;let t=await this.$store.dispatch("erc20/balanceOf",{address:st.Z.usdt,account:this.$store.state.app.account});this.balance=t/at.gQ},dealNum(t){if(t)return t?parseInt(100*Number(t))/100:0},close(){(!this.slipValue||this.slipValue<=0)&&this.$message.info("Please input slip value")},async trade(){if(!this.isConnected)return void this.$message.info("Please connect");let t=await this.$store.dispatch("vault/getPrice",{_indexToken:this.positionObj.index_token}),e=!0,a=0,s=ot.multiply(ot.divide(t,at.Yy),this.positionObj.size),n=ot.multiply(this.positionObj.average_price,this.positionObj.size);1==this.positionObj.direction?(e=!0,a=ot.subtract(s,n)):(e=!1,a=ot.subtract(n,s));let i=ot.add(this.positionObj.collateral,a),o=ot.divide(ot.multiply(ot.multiply(this.positionObj.size,this.feeRate),t),at.PL),r=ot.subtract(ot.multiply(i,at.gQ),o);this.closeOnloading=!0,this.$store.dispatch("vault/updatePosition",{_indexToken:this.positionObj.index_token,_leverage:this.positionObj.leverage,_sizeDelta:(0,et.Z)(this.positionObj.size*10**6).toFixed(0),_collateralDelta:parseInt(r),_indexPrice:t,_direction:!e,_collateralDeltaInIO:!1}).then((async t=>{this.$message.info("Close success");let e=await it(t.blockHash);this.$emit("setLoading",!0),this.closeOnloading=!1,1==e.data.data&&setTimeout((()=>{this.$emit("updateData"),this.$emit("setLoading",!1)}),2e3)})).catch((t=>{this.closeOnloading=!1,t&&t.message?this.$message.info(t.message):this.$message.info(t)}))}}},lt=rt,ct=(0,u.Z)(lt,X,tt,!1,null,"6e4ac21c",null),ut=ct.exports,dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MarginManage"},[e("div",{staticClass:"mask"}),e("div",{staticClass:"margin-content"},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[t._v(" Margin Manage ")]),e("svg",{staticClass:"icon close",attrs:{t:"1677826899914",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5251",id:"mx_n_1677826899918",width:"14",height:"14"},on:{click:function(e){return t.$emit("closeMarginManage")}}},[e("path",{attrs:{d:"M570.514286 512l292.571428-292.571429c14.628571-14.628571 14.628571-43.885714 0-58.514285-14.628571-14.628571-43.885714-14.628571-58.514285 0l-292.571429 292.571428-292.571429-292.571428c-14.628571-14.628571-43.885714-14.628571-58.514285 0-21.942857 14.628571-21.942857 43.885714 0 58.514285l292.571428 292.571429-292.571428 292.571429c-14.628571 14.628571-14.628571 43.885714 0 58.514285 14.628571 14.628571 43.885714 14.628571 58.514285 0l292.571429-292.571428 292.571429 292.571428c14.628571 14.628571 43.885714 14.628571 58.514285 0 14.628571-14.628571 14.628571-43.885714 0-58.514285l-292.571428-292.571429z",fill:"#0E1D51","p-id":"5252"}})])]),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v(" Margin ")]),e("div",{staticClass:"flex-box"},[e("button",{staticClass:"operate",class:{remove:0!=t.activeNav},on:{click:function(e){t.activeNav=0}}},[t._v(" Add Margin ")]),e("button",{staticClass:"operate",class:{remove:1!=t.activeNav},on:{click:function(e){t.activeNav=1}}},[t._v(" Remove Margin ")])]),e("div",{staticClass:"title"},[t._v(" Account Balance ")]),e("div",{staticClass:"balance"},[t._v(" "+t._s(t.dealNum(t.balance))+" USDC ")]),e("div",{staticClass:"title"},[t._v(" Margin Amount ")]),e("div",{staticClass:"input-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",step:"any",placeholder:"0.000"},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.updateAmount]}}),e("div",{staticClass:"max-btn",on:{click:t.setMax}},[t._v(" MAX ")])]),e("div",{staticClass:"title"},[t._v(" Positions Update ")]),e("div",{staticClass:"info-list"},[e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Margin ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.getMargin(t.positionObj))+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Margin Ratio ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.marginRatio(t.positionObj))+"% ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"name"},[t._v(" Leverage ")]),e("div",{staticClass:"value"},[t._v(" "+t._s(t.positionObj.leverage)+" ")])])]),e("a-button",{staticClass:"operate confim",attrs:{loading:t.tradeOnloading},on:{click:t.confirm}},[t._v(" Confirm ")])],1)])])},pt=[];const mt=new K.Z;var ht={name:"MarginManage",data(){return{tradeOnloading:!1,amount:void 0,balance:0,activeNav:0}},props:["positionObj","coinInfo","initData","setLoading"],computed:{...(0,v.Se)(["isConnected","account"]),tokenPriceMap(){return this.$store.state.perpetual.priceMap}},watch:{isConnected(){this.getBalance()},account(){this.getBalance()}},methods:{updateAmount(){let t=this.amount.replace(/[^\d.]/g,"");const e=t.split(".");let a=e[0],s=e[1];s&&s.length>2&&(s=s.slice(0,2)),t=s?`${a}.${s}`:a,this.amount=t},getMargin(t){let e=0;this.amount&&(e=this.amount),1==this.activeNav&&(e=-e);let a=mt.add(t.collateral,t.pnl);return a=mt.add(a,e),this.dealNum(a)},marginRatio(t){let e=0;this.amount&&(e=this.amount),1==this.activeNav&&(e=-e);const a=this.tokenPriceMap[t.index_token];let s=mt.add(t.collateral,t.pnl);return s=mt.add(s,e),this.dealNum(s/(a*t.size/t.leverage)*100)},async getBalance(){if(!this.isConnected)return;let t=await this.$store.dispatch("erc20/balanceOf",{address:st.Z.usdt,account:this.$store.state.app.account});this.balance=t/at.gQ},dealNum(t){return t&&t?parseInt(100*Number(t))/100:0},setMax(){if(this.amount=0,0==this.activeNav)this.amount=(0,et.Z)(this.balance).toFixed(2,et.Z.ROUND_DOWN);else{const t=this.tokenPriceMap[this.positionObj.index_token],e=mt.divide(mt.multiply(t,this.positionObj.size),this.positionObj.leverage)*at.I$;this.amount=(0,et.Z)(mt.subtract(this.getMargin(this.positionObj),e)).toFixed(2,et.Z.ROUND_DOWN)}},async trade(){this.marginRatio(this.positionObj)<100*at.I$?C.Z.error("Margin Ratio should > "+100*at.I$):(this.tradeOnloading=!0,this.$store.dispatch("vault/updateCollateral",{_indexToken:this.positionObj.index_token,_collateralDelta:(0,et.Z)(this.amount*at.gQ).toFixed(0),_collateralDeltaInIO:0==this.activeNav}).then((async t=>{this.tradeOnloading=!1,this.$message.info((0==this.activeNav?"Add":"Remove")+" success"),this.amount=0;let e=await it(t.blockHash);this.$emit("setLoading",!0),1==e.data.data&&setTimeout((()=>{this.$emit("initData"),this.$emit("setLoading",!1)}),2e3)})).catch((t=>{console.log(t),this.tradeOnloading=!1,t&&t.message?this.$message.info(t.message):this.$message.info(t)})))},confirm(){this.isConnected?!this.amount||this.amount<=0?this.$message.info("Please input amount"):this.trade():this.$message.info("Please connect")}},created(){this.getBalance()}},vt=ht,gt=(0,u.Z)(vt,dt,pt,!1,null,"4c25e394",null),ft=gt.exports;const yt=new K.Z;var wt={name:"vaultReacord",props:["positionArr","coinInfo","feeRate","configInfo","activeTokenName","isShowTempPosition","updatePosition"],components:{ClosePositions:ut,MarginManage:ft},data(){return{formatTime:J,total1:10,total2:10,total3:10,current1:0,pageSize1:10,current2:0,pageSize2:10,current3:0,pageSize3:10,isLoading:!1,isShowClosePosition:!1,isShowMarginManage:!1,activeNav:0,recordArr:[],fundingFeeArr:[],profitArr:[],clickPosition:{}}},computed:{...(0,v.Se)(["isConnected","account"]),tokenPriceMap(){return this.$store.state.perpetual.priceMap}},watch:{account(){this.initData()},current1(t){this.getProfitData(t)},current2(t){this.getRecordData(t)},current3(t){this.getFundingFeeData(t)}},mounted(){this.initData()},methods:{onShowSizeChange1(t,e){this.pageSize1=e,this.getProfitData(t)},onShowSizeChange2(t,e){this.pageSize2=e,this.getRecordData(t)},onShowSizeChange3(t,e){this.pageSize3=e,this.getFundingFeeData(t)},updateData(){this.$emit("updatePosition"),this.initData()},setLoading(t){this.isLoading=t},getPNL(t){const e=this.tokenPriceMap[t.index_token],a=yt.multiply(t.average_price,t.size),s=yt.multiply(t.size,e);let n=0;return n=1==t.direction?(0,et.Z)(yt.subtract(s,a)).toFixed(2):(0,et.Z)(yt.subtract(a,s)).toFixed(2),t.pnl=n,n},getMargin(t){let e=yt.add(t.collateral,t.pnl);return this.dealNum(e)},marginRatio(t){const e=this.tokenPriceMap[t.index_token];let a=yt.add(t.collateral,t.pnl);return this.dealNum(a/(e*t.size/t.leverage)*100)},async getProfitData(t){t&&(this.current1=t);let e=await G(this.account,this.current1*this.pageSize1,this.pageSize1);this.profitArr=e.data.data,this.total1=e.data.extra.total},getLQP(t){const e=yt.multiply(t.average_price,t.size),a=yt.multiply(t.size,t.average_price),s=yt.divide(yt.multiply(t.size,at.I$),t.leverage);if(1==t.direction){let n=yt.subtract(yt.divide(e,t.leverage),a),i=yt.subtract(s,t.size),o=yt.divide(n,i);return o>=0?(0,et.Z)(o).toFixed(2):0}{let n=yt.add(yt.divide(e,t.leverage),a),i=yt.add(s,t.size),o=yt.divide(n,i);return o>=0?(0,et.Z)(o).toFixed(2):0}},async getRecordData(t){t&&(this.current2=t);let e=await Q(this.account,this.current2*this.pageSize2,this.pageSize2);this.recordArr=e.data.data,this.total2=e.data.extra.total},async getFundingFeeData(t){t&&(this.current3=t);let e=await Y(this.account,this.current3*this.pageSize3,this.pageSize3);this.fundingFeeArr=e.data.data,this.total3=e.data.extra.total},initData(){this.getRecordData(),this.getFundingFeeData(),this.getProfitData()},dealD6Num(t){return t&&t?parseInt(1e6*Number(t))/1e6:0},dealFeeNum(t){return 0==t?0:t<1e-5?"<0.00001":t&&t?parseInt(1e6*Number(t))/1e6:0},dealNum(t){return t&&t?parseInt(100*Number(t))/100:0}}},Ct=wt,bt=(0,u.Z)(Ct,L,U,!1,null,"2f0f98fe",null),_t=bt.exports;const kt=W.Z.create({baseURL:"https://perp.bbbing.co",timeout:5e3,headers:{"Content-Type":"application/json"}}),St=()=>kt.get("/api/token/prices?chain=1"),Tt=()=>kt.get("/api/config?chain=1");let Nt=null,Pt=null;const It=new K.Z;var xt={name:"HomeView",components:{VaultRecord:_t},data(){return{startTime:"00:00:00",isLoading:!1,usdcAllowance:0,amount:void 0,configInfo:{},slideValue:2,slipValue:1,progress:10,widgetId:"tradingview_8c9b3",widgetHeight:330,operateNav:0,feeRate:0,curTVSymbol:"BINANCE:BTCUSDT",curSymbol:"BTC/USDC",activeTokenName:"BTC",coinInfo:{},isShowTempPosition:!1,positionArr:[],tempPositionArr:[],tradeOnloading:!1,usdcAmount:void 0}},watch:{chainId(){this.initData()},account(){this.initData()},isConnected(){this.initData()},slideValue(){this.amount>0?(this.tempPositionArr.forEach((t=>{t.name==this.activeTokenName&&(t.average_price=this.tokenPriceMap[t.index_token],t.leverage=this.slideValue,t.pnl=0,t.size=Math.abs(this.endSize),t.collateral=Math.abs(this.endSize)*this.tokenPriceMap[t.index_token]/this.slideValue,t.direction==this.operateNav&&this.amount>parseFloat(t.size)&&(t.direction=!t.direction))})),this.isShowTempPosition=!0):(this.isShowTempPosition=!1,this.dealPositionData())},amount(t){t>0?(this.tempPositionArr.forEach((e=>{if(e.name==this.activeTokenName&&(e.average_price=this.tokenPriceMap[e.index_token],e.leverage=this.slideValue,e.pnl=0,e.size=Math.abs(this.endSize),e.collateral=Math.abs(this.endSize)*this.tokenPriceMap[e.index_token]/this.slideValue,e.direction==this.operateNav)){let a=0;this.positionArr.forEach((t=>{t.index_token==e.index_token&&(a=t.size)})),t>parseFloat(a)&&(e.direction=!e.direction)}})),this.isShowTempPosition=!0):(this.isShowTempPosition=!1,this.dealPositionData())}},computed:{countdown(){const t=new Date,e=new Date(this.startTime);let a=new Date(e.getFullYear(),e.getMonth(),e.getDate(),8);while(t>a)a=new Date(a.getTime()+288e5);const s=a-t,n=Math.ceil(s/1e3);let i=Math.floor(n/3600);i=i<10?"0"+i:i;let o=Math.floor((n-3600*i)/60);o=o<10?"0"+o:o;let r=n-3600*i-60*o;return r=r<10?"0"+r:r,i+":"+o+":"+r},tokenPriceMap(){return this.$store.state.perpetual.priceMap},collateralDeltaInIO(){return!(this.payValue>=0)},curValue(){return this.usdcAmount>0&&this.amount>0?It.divide(this.usdcAmount,this.slideValue):0},hasCurNamePosition(){let t=!1;for(let e=0;e<this.positionArr.length;e++){const a=this.positionArr[e];a.name==this.activeTokenName&&(t=!0)}return t},endSize(){if(this.usdcAmount>0&&this.amount>0){let t=0,e=!1;for(let a=0;a<this.positionArr.length;a++){const s=this.positionArr[a];if(s.name==this.activeTokenName)return e=!0,t=s.direction!=this.operateNav?It.add(s.size,this.amount):It.subtract(s.size,this.amount),t}if(!e)return this.amount}return 0},fee(){return this.usdcAmount*this.feeRate},payValue(){if(this.usdcAmount>0&&this.amount>0){let t=0,e=0,a=!1;for(let s=0;s<this.positionArr.length;s++){const n=this.positionArr[s];if(n.name==this.activeTokenName)return a=!0,e=It.add(n.collateral,this.getPNL(n)),t=e-Math.abs(this.endSize)*this.tokenPriceMap[n.index_token]/this.slideValue,t}if(!a)return-this.curValue}return 0},liquidationPrice(){if(this.usdcAmount>0&&this.amount>0){let t=!1;for(let e=0;e<this.positionArr.length;e++){const a=this.positionArr[e];if(a.name==this.activeTokenName)return t=!0,this.calculatLiq(2,a)}if(!t)return this.calculatLiq(1)}return 0},direction(){return this.amount>0&&this.slideValue?0==this.operateNav:0},userPayAmount(){if(!this.fee||!this.payValue)return 0;if(this.collateralDeltaInIO)return(0,et.Z)(It.add(Math.abs(this.payValue),this.fee)).toFixed(2);{const t=(0,et.Z)(It.subtract(Math.abs(this.payValue),this.fee)).toFixed(2,et.Z.ROUND_DOWN);return t}},collapsed(){return this.$store.state.collapsed},tradeActive(){return!(!this.amount||this.amount<=0)&&(!(!this.hasCurNamePosition&&Math.abs(this.payValue)<10)||void 0)},...(0,v.Se)(["isConnected","account","chainId"])},methods:{getPNL(t){const e=this.tokenPriceMap[t.index_token],a=It.multiply(t.average_price,t.size),s=It.multiply(t.size,e);let n=0;return n=1==t.direction?(0,et.Z)(It.subtract(s,a)).toFixed(2):(0,et.Z)(It.subtract(a,s)).toFixed(2),t.pnl=n,n},calculatLiq(t,e){if(1===t){if(0==this.operateNav){let t=this.usdcAmount/this.slideValue-this.amount*this.tokenPriceMap[this.coinInfo.contract_address],e=this.amount*at.I$/this.slideValue-this.amount,a=It.divide(t,e);return a>=0?a:0}{let t=this.usdcAmount/this.slideValue+this.amount*this.tokenPriceMap[this.coinInfo.contract_address],e=this.amount*at.I$/this.slideValue+this.amount,a=It.divide(t,e);return a>=0?a:0}}{let t,a;if(e.direction==this.direction){const s=It.add(e.size,this.amount),n=It.divide(It.multiply(s,this.tokenPriceMap[this.coinInfo.contract_address]),this.slideValue);1==e.direction?(t=n-s*this.tokenPriceMap[this.coinInfo.contract_address],a=s*at.I$/this.slideValue-s):(console.log(n,s),t=It.add(n,s*this.tokenPriceMap[this.coinInfo.contract_address]),a=It.add(It.divide(s*at.I$,this.slideValue),s));let i=It.divide(t,a);return i>=0?i:0}{let s=It.subtract(e.size,this.amount),n=s>0?e.direction:this.direction;s=Math.abs(s);const i=It.divide(It.multiply(s,this.tokenPriceMap[this.coinInfo.contract_address]),this.slideValue);n?(t=i-s*this.tokenPriceMap[this.coinInfo.contract_address],a=s*at.I$/this.slideValue-s):(t=It.add(i,It.multiply(s,this.tokenPriceMap[this.coinInfo.contract_address])),a=It.add(It.divide(s*at.I$,this.slideValue),s));let o=It.divide(t,a);return o>=0?o:0}}},dealPositionData(){this.tempPositionArr=[{average_price:"1500",collateral:"0",direction:1,icon:"https://cdn-icons-png.flaticon.com/128/7829/7829596.png",index_token:"0x62CAe0FA2da220f43a51F86Db2EDb36DcA9A5A08",leverage:2,name:"ETH",pnl:"0",size:"0"},{average_price:"20100",collateral:"0",direction:1,icon:"https://cdn-icons-png.flaticon.com/128/5968/5968260.png",index_token:"0x6550bc2301936011c1334555e62A87705A81C12C",leverage:2,name:"BTC",pnl:"0",size:"0"}],this.positionArr.forEach((t=>{this.tempPositionArr.forEach((e=>{e.name==t.name&&(e.size=t.size,e.direction=t.direction,e.leverage=t.leverage,e.average_price=t.average_price,e.collateral=t.collateral,e.pnl=t.pnl)}))}))},async getPositionData(){try{let t=await H(this.account),e=t.data.data;this.positionArr.splice(0,2),this.positionArr=e,this.dealPositionData()}catch(t){console.log(t)}},dealD6Num(t){return t&&t?parseInt(1e6*Number(t))/1e6:0},dealFeeNum(t){return 0==t?0:t<1e-5?"<0.00001":t&&t?parseInt(1e6*Number(t))/1e6:0},dealNum(t){return t&&t?parseInt(100*Number(t))/100:0},setLoading(t){this.isLoading=t},formatTip(t){const e=this.$createElement;return e("span",{style:"position: 'absolute';top: '-24px'; left: '50%'; transform: 'translateX(-50%)' "},[t," x"])},updateUSDCAmount(){let t=this.amount.replace(/[^\d.]/g,"");const e=t.split(".");let a=e[0],s=e[1];s&&s.length>4&&(s=s.slice(0,4)),t=s?`${a}.${s}`:a,this.amount=t,this.usdcAmount=(0,et.Z)(this.amount*this.tokenPriceMap[this.coinInfo.contract_address]).toFixed(2)},updateAmount(){let t=this.usdcAmount.replace(/[^\d.]/g,"");const e=t.split(".");let a=e[0],s=e[1];s&&s.length>2&&(s=s.slice(0,2)),t=s?`${a}.${s}`:a,this.usdcAmount=t,this.amount=(0,et.Z)(It.divide(this.usdcAmount,this.tokenPriceMap[this.coinInfo.contract_address])).toFixed(4,et.Z.ROUND_DOWN)},async allowance(){if(!this.isConnected)return;let t=await this.$store.dispatch("erc20/allowance",{address:st.Z.usdt,spender:st.Z.vault,owner:this.account});this.usdcAllowance=t>0?parseInt(t)/at.gQ:0},approve(){this.isConnected?this.$store.dispatch("erc20/approve",{address:st.Z.usdt,spender:st.Z.vault,amount:this.$store.state.app.web3.utils.toWei((10**10).toString()).toString()}).then((()=>{this.allowance()})):this.$message.info("Please connect")},async trade(){if(!this.isConnected)return void this.$message.info("Please connect");if(!this.amount||this.amount<=0)return void this.$message.info("Please input amount");if(!this.slideValue||this.slideValue<=0)return void this.$message.info("Please input slideValue");if(this.usdcAmount<10)return void this.$message.info("Amount less than 10u");if(!this.hasCurNamePosition&&Math.abs(this.payValue)<10)return void this.$message.info("Pay Amount less than 10u");let t=await this.$store.dispatch("vault/getPrice",{_indexToken:this.coinInfo.contract_address}),e=0;e=(0,et.Z)(Math.abs(this.amount)*at.tZ).toFixed(0),this.tradeOnloading=!0;try{this.$store.dispatch("vault/updatePosition",{_indexToken:this.coinInfo.contract_address,_leverage:this.slideValue,_sizeDelta:Math.abs(e),_collateralDelta:(0,et.Z)(this.userPayAmount*at.tZ).toFixed(0),_indexPrice:t,_direction:this.direction,_collateralDeltaInIO:this.collateralDeltaInIO}).then((async t=>{this.$message.info("Trade success"),this.amount=void 0,this.usdcAmount=void 0,this.isLoading=!0;let e=await it(t.blockHash);this.tradeOnloading=!1,1==e.data.data&&setTimeout((()=>{this.initData(),this.$refs.vaultRR.initData(),this.isLoading=!1}),2e3)})).catch((t=>{console.log(t),this.tradeOnloading=!1,t&&t.message?this.$message.info(t.message):this.$message.info(t)})).finally((()=>{this.tradeOnloading=!1}))}catch(a){console.log(a),this.tradeOnloading=!1}},handleMenuClick(t){let e="",a="",s="";1==t.key?(e="BINANCE:BTCUSDT",a="BTC/USDC",s="BTC"):2==t.key&&(e="BINANCE:ETHUSDT",a="ETH/USDC",s="ETH"),e!=this.curTVSymbol&&(this.curTVSymbol=e,this.curSymbol=a,this.activeTokenName=s,this.getData(),this.createWidget()),this.amount=void 0,this.usdcAmount=void 0},loadTradingViewScript(){if(document.getElementById("tradingview-widget-loading-script"))return void this.createWidget();const t=document.createElement("script");t.id="tradingview-widget-loading-script",t.src="https://s3.tradingview.com/tv.js",t.type="text/javascript",t.onload=()=>this.createWidget(),document.head.appendChild(t)},createWidget(){document.getElementById(this.widgetId)&&window.TradingView&&new window.TradingView.widget({autosize:!0,symbol:this.curTVSymbol,interval:"D",timezone:"Etc/UTC",theme:"light",style:"1",locale:"en",toolbar_bg:"#f1f3f6",enable_publishing:!1,container_id:this.widgetId})},initData(){this.amount=void 0,this.slideValue=2,this.usdcAmount=void 0,this.getPositionData(),this.isConnected&&this.allowance()},async getData(){try{this.$store.dispatch("perpetual/getPriceMap"),this.getPositionData();let t=await Tt();this.configInfo=t.data.data,this.feeRate=Number(this.configInfo.transaction_fee_rate),this.configInfo&&this.configInfo.tokens&&this.configInfo.tokens.forEach((t=>{t.name==this.activeTokenName&&(this.coinInfo=t)}))}catch(t){console.log(t)}},countdownMethod(){const t=new Date;t.setHours(0,0,0,0);let e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),8);while(t>e)e=new Date(e.getTime()+288e5);this.startTime=e,setInterval((()=>{this.startTime=new Date(this.startTime.getTime()+1e3)}),1e3)}},mounted(){this.loadTradingViewScript(),this.getData(),this.initData(),Nt=setInterval((()=>{this.$store.dispatch("perpetual/getPriceMap")}),1e4),this.countdownMethod()},beforeDestroy(){clearInterval(Nt),Nt=null,clearInterval(Pt),Pt=null}},Ot=xt,Mt=(0,u.Z)(Ot,$,B,!1,null,"62da97f6",null),At=Mt.exports;s.ZP.use(R.ZP);const jt=[{path:"/",name:"home",component:At},{path:"/Pool",name:"Pool",component:()=>a.e(443).then(a.bind(a,49305))}],Ft=new R.ZP({base:"/perp/",routes:jt});var Dt=Ft;const Et={isConnected:t=>t.app.isConnected,account:t=>t.app.account,chainId:t=>t.app.chainId};var zt=Et;const Rt={web3:null,account:"",isConnected:!1,chainId:666,ethBalance:0,collapsed:!0,desireChainId:null},$t={SET_ACCOUNT(t,e){t.account=e},SET_ISCONNECT(t,e){t.isConnected=e},SET_Web3(t,e){t.web3=e},SET_Balance(t,e){t.ethBalance=e},SET_CHAINID:(t,e)=>{t.chainId=e},SET_DESIRE_CHAINID:(t,e)=>{t.desireChainId=e},SET_SIDEBAR(t,e){t.collapsed=e},SET_PRICE(t,e){t.priceMap=e}},Bt={wrongNetWork(t){return t.chainId!==t.desireChainId}},Lt={toggleSideBar({commit:t},e){t("SET_SIDEBAR",e)},updateDesireChainId({commit:t},e){t("SET_DESIRE_CHAINID",e)},updateChainId({commit:t},e){t("SET_CHAINID",e)}};var Ut={namespaced:!0,state:Rt,mutations:$t,actions:Lt,getters:Bt};const Vt={vault:{abi:a(65898),address:st.Z.vault},CLP:{abi:a(29732),address:st.Z.CLP},vaultUtil:{abi:a(2809),address:st.Z.vaultUtil},erc20:{abi:a(40625)}};function Zt(t,e){return new e.eth.Contract(Vt[t].abi,Vt[t].address,{})}function Jt(t,e,a){return new a.eth.Contract(Vt[t].abi,e,{})}function Wt(t){return Vt[t].address}var qt={CONTRACTS:Vt,getContractByName:Zt,getContractByToken:Jt,getContractAddress:Wt};function Ht(t){Gt.token||(Gt.token=qt.getContractByName("vault",t.app.web3))}const Gt={},Qt={},Yt={POSITION_PRECISE({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.POSITION_PRECISE().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},PRICE_PRECISION({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.PRICE_PRECISION().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},PRICE_TO_USD({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.PRICE_TO_USD().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},RATE_DIVISOR({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.RATE_DIVISOR().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},USD_PRECISION({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.USD_PRECISION().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},allIndexTokens({rootState:t},{param0:e}){return Ht(t),new Promise(((t,a)=>{Gt.token.methods.allIndexTokens(e).call().then((e=>{t(e)})).catch((t=>{a(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},clearingMarginRate({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.clearingMarginRate().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},collateral({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.collateral().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},errors({rootState:t},{param0:e}){return Ht(t),new Promise(((t,a)=>{Gt.token.methods.errors(e).call().then((e=>{t(e)})).catch((t=>{a(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},feeOwner({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.feeOwner().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},gov({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.gov().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},initialized({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.initialized().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},liquidateFeeRate({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.liquidateFeeRate().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},lpFeeRate({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.lpFeeRate().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},oracle({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.oracle().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},platformFee({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.platformFee().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},positions({rootState:t},{param0:e,param1:a}){return Ht(t),new Promise(((t,s)=>{Gt.token.methods.positions(e,a).call().then((e=>{t(e)})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},reserveAmount({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.reserveAmount().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},transactionFeeRate({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.transactionFeeRate().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},usd({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.usd().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},vaultUtil({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.vaultUtil().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},initialize({rootState:t},{_gov:e,_oracle:a,_usd:s,_vaultUtil:n,_feeOwner:i,_clp:o}){return Ht(t),new Promise(((r,l)=>{Gt.token.methods.initialize(e,a,s,n,i,o).estimateGas({from:t.app.account}).then((l=>{Gt.token.methods.initialize(e,a,s,n,i,o).send({from:t.app.account,gas:parseInt(1.2*l)}).then((t=>{r(t)}))})).catch((t=>{l(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},setOracle({rootState:t},{_newOracle:e}){return Ht(t),new Promise(((a,s)=>{Gt.token.methods.setOracle(e).estimateGas({from:t.app.account}).then((s=>{Gt.token.methods.setOracle(e).send({from:t.app.account,gas:parseInt(1.2*s)}).then((t=>{a(t)}))})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},setFeeOwner({rootState:t},{_feeOwner:e}){return Ht(t),new Promise(((a,s)=>{Gt.token.methods.setFeeOwner(e).estimateGas({from:t.app.account}).then((s=>{Gt.token.methods.setFeeOwner(e).send({from:t.app.account,gas:parseInt(1.2*s)}).then((t=>{a(t)}))})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},setIndexToken({rootState:t},{_indexToken:e,_allow:a}){return Ht(t),new Promise(((s,n)=>{Gt.token.methods.setIndexToken(e,a).estimateGas({from:t.app.account}).then((n=>{Gt.token.methods.setIndexToken(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},setClearingMarginRate({rootState:t},{_clearingMarginRate:e}){return Ht(t),new Promise(((a,s)=>{Gt.token.methods.setClearingMarginRate(e).estimateGas({from:t.app.account}).then((s=>{Gt.token.methods.setClearingMarginRate(e).send({from:t.app.account,gas:parseInt(1.2*s)}).then((t=>{a(t)}))})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},setLiquidateFeeRate({rootState:t},{_liquidateFeeRate:e}){return Ht(t),new Promise(((a,s)=>{Gt.token.methods.setLiquidateFeeRate(e).estimateGas({from:t.app.account}).then((s=>{Gt.token.methods.setLiquidateFeeRate(e).send({from:t.app.account,gas:parseInt(1.2*s)}).then((t=>{a(t)}))})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},setTransactionFeeRate({rootState:t},{_transactionFeeRate:e}){return Ht(t),new Promise(((a,s)=>{Gt.token.methods.setTransactionFeeRate(e).estimateGas({from:t.app.account}).then((s=>{Gt.token.methods.setTransactionFeeRate(e).send({from:t.app.account,gas:parseInt(1.2*s)}).then((t=>{a(t)}))})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},setLpFeeRate({rootState:t},{_lpFeeRate:e}){return Ht(t),new Promise(((a,s)=>{Gt.token.methods.setLpFeeRate(e).estimateGas({from:t.app.account}).then((s=>{Gt.token.methods.setLpFeeRate(e).send({from:t.app.account,gas:parseInt(1.2*s)}).then((t=>{a(t)}))})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},allIndexTokensLength({rootState:t}){return Ht(t),new Promise(((t,e)=>{Gt.token.methods.allIndexTokensLength().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},withdrawFee({rootState:t},{_receiver:e,_amount:a}){return Ht(t),new Promise(((s,n)=>{Gt.token.methods.withdrawFee(e,a).estimateGas({from:t.app.account}).then((n=>{Gt.token.methods.withdrawFee(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},setError({rootState:t},{_errorCode:e,_error:a}){return Ht(t),new Promise(((s,n)=>{Gt.token.methods.setError(e,a).estimateGas({from:t.app.account}).then((n=>{Gt.token.methods.setError(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},updateCollateral({rootState:t},{_indexToken:e,_collateralDelta:a,_collateralDeltaInIO:s}){return Ht(t),new Promise(((n,i)=>{Gt.token.methods.updateCollateral(e,a,s).estimateGas({from:t.app.account}).then((o=>{Gt.token.methods.updateCollateral(e,a,s).send({from:t.app.account,gas:parseInt(1.2*o)}).then((t=>{n(t)})).catch((t=>{try{let e=JSON.parse(t.message.substr(24,t.message.length)).message;i(e)}catch{i(t)}}))})).catch((t=>{try{let e=JSON.parse(t.message.substr(24,t.message.length)).message;i(e)}catch{i(t)}}))}))},updatePosition({rootState:t},{_indexToken:e,_leverage:a,_sizeDelta:s,_collateralDelta:n,_indexPrice:i,_direction:o,_collateralDeltaInIO:r}){return console.log({_indexToken:e,_leverage:a,_sizeDelta:s,_collateralDelta:n,_indexPrice:i,_direction:o,_collateralDeltaInIO:r}),Ht(t),new Promise(((l,c)=>{Gt.token.methods.updatePosition(e,a,s,n,i,o,r).estimateGas({from:t.app.account}).then((u=>{Gt.token.methods.updatePosition(e,a,s,n,i,o,r).send({from:t.app.account,gas:parseInt(1.2*u)}).then((t=>{l(t)})).catch((t=>{try{let e=JSON.parse(t.message.substr(24,t.message.length)).message;c(e)}catch{c(t)}}))})).catch((t=>{try{let e=JSON.parse(t.message.substr(24,t.message.length)).message;c(e)}catch{c(t)}}))}))},liquidatePosition({rootState:t},{_indexToken:e,_account:a}){return Ht(t),new Promise(((s,n)=>{Gt.token.methods.liquidatePosition(e,a).estimateGas({from:t.app.account}).then((n=>{Gt.token.methods.liquidatePosition(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},updateFundingRate({rootState:t},{_indexToken:e,_report:a}){return Ht(t),new Promise(((s,n)=>{Gt.token.methods.updateFundingRate(e,a).estimateGas({from:t.app.account}).then((n=>{Gt.token.methods.updateFundingRate(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},updateFundingRateTest({rootState:t},{_time:e}){return Ht(t),new Promise(((a,s)=>{Gt.token.methods.updateFundingRateTest(e).estimateGas({from:t.app.account}).then((s=>{Gt.token.methods.updateFundingRateTest(e).send({from:t.app.account,gas:parseInt(1.2*s)}).then((t=>{a(t)}))})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},getPrice({rootState:t},{_indexToken:e}){return Ht(t),new Promise(((t,a)=>{Gt.token.methods.getPrice(e).call().then((e=>{t(e)})).catch((t=>{console.log(t),a(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},globalData({rootState:t},{_indexToken:e}){return Ht(t),new Promise(((t,a)=>{Gt.token.methods.globalData(e).call().then((e=>{t(e)})).catch((t=>{a(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))}};var Kt={namespaced:!0,mutations:Qt,state:Gt,actions:Yt};function Xt(t,e){te.token||(te.token=qt.getContractByToken("erc20",e,t.app.web3))}const te={},ee={},ae={allowance({rootState:t},{owner:e,spender:a,address:s}){return Xt(t,s),new Promise(((t,s)=>{te.token.methods.allowance(e,a).call().then((e=>{t(e)})).catch((t=>{s(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},approve({rootState:t},{spender:e,amount:a,address:s}){return Xt(t,s),new Promise(((s,n)=>{te.token.methods.approve(e,a).estimateGas({from:t.app.account}).then((n=>{te.token.methods.approve(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},balanceOf({rootState:t},{account:e,address:a}){return Xt(t,a),new Promise(((t,a)=>{te.token.methods.balanceOf(e).call().then((e=>{t(e)})).catch((t=>{a(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},decimals({rootState:t}){return Xt(t),new Promise(((t,e)=>{te.token.methods.decimals().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},decreaseAllowance({rootState:t},{spender:e,subtractedValue:a}){return Xt(t),new Promise(((s,n)=>{te.token.methods.decreaseAllowance(e,a).estimateGas({from:t.app.account}).then((n=>{te.token.methods.decreaseAllowance(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},increaseAllowance({rootState:t},{spender:e,addedValue:a}){return Xt(t),new Promise(((s,n)=>{te.token.methods.increaseAllowance(e,a).estimateGas({from:t.app.account}).then((n=>{te.token.methods.increaseAllowance(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},name({rootState:t}){return Xt(t),new Promise(((t,e)=>{te.token.methods.name().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},symbol({rootState:t}){return Xt(t),new Promise(((t,e)=>{te.token.methods.symbol().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},totalSupply({rootState:t}){return Xt(t),new Promise(((t,e)=>{te.token.methods.totalSupply().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},transfer({rootState:t},{recipient:e,amount:a}){return Xt(t),new Promise(((s,n)=>{te.token.methods.transfer(e,a).estimateGas({from:t.app.account}).then((n=>{te.token.methods.transfer(e,a).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{s(t)}))})).catch((t=>{n(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},transferFrom({rootState:t},{sender:e,recipient:a,amount:s}){return Xt(t),new Promise(((n,i)=>{te.token.methods.transferFrom(e,a,s).estimateGas({from:t.app.account}).then((i=>{te.token.methods.transferFrom(e,a,s).send({from:t.app.account,gas:parseInt(1.2*i)}).then((t=>{n(t)}))})).catch((t=>{i(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))}};var se={namespaced:!0,mutations:ee,state:te,actions:ae};function ne(t){ie.token||(ie.token=qt.getContractByName("CLP",t.app.web3))}const ie={},oe={},re={mint({rootState:t},{_usdAmount:e}){return ne(t),new Promise(((a,s)=>{ie.token.methods.mint(e).estimateGas({from:t.app.account}).then((n=>{ie.token.methods.mint(e).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{a(t)})).catch((t=>{try{let e=JSON.parse(t.message.substr(24,t.message.length)).message;s(e)}catch{s(t)}}))})).catch((t=>{try{let e=JSON.parse(t.message.substr(24,t.message.length)).message;s(e)}catch{s(t)}}))}))},burn({rootState:t},{_clpAmount:e}){return ne(t),new Promise(((a,s)=>{ie.token.methods.burn(e).estimateGas({from:t.app.account}).then((n=>{ie.token.methods.burn(e).send({from:t.app.account,gas:parseInt(1.2*n)}).then((t=>{a(t)})).catch((t=>{try{let e=JSON.parse(t.message.substr(24,t.message.length)).message;s(e)}catch{s(t)}}))})).catch((t=>{try{let e=JSON.parse(t.message.substr(24,t.message.length)).message;s(e)}catch{s(t)}}))}))},totalSupply({rootState:t}){return ne(t),new Promise(((t,e)=>{ie.token.methods.totalSupply().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},balanceOf({rootState:t},{account:e}){return ne(t),new Promise(((t,a)=>{ie.token.methods.balanceOf(e).call().then((e=>{t(e)})).catch((t=>{a(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))}};var le={namespaced:!0,mutations:oe,state:ie,actions:re};function ce(t){ue.token||(ue.token=qt.getContractByName("vaultUtil",t.app.web3))}const ue={},de={},pe={assets({rootState:t}){return ce(t),new Promise(((t,e)=>{ue.token.methods.assets().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))},getAum({rootState:t}){return ce(t),new Promise(((t,e)=>{ue.token.methods.getAum().call().then((e=>{t(e)})).catch((t=>{e(JSON.parse(t.message.substr(24,t.message.length)).message)}))}))}};var me={namespaced:!0,mutations:de,state:ue,actions:pe},he={vault:Kt,erc20:se,CLP:le,vaultUtil:me};const ve={priceMap:{}},ge={SET_PRICE(t,e){t.priceMap=e}},fe={async getPriceMap({commit:t}){let e=await St();e&&e.data.data&&t("SET_PRICE",e.data.data)}};var ye={namespaced:!0,state:ve,mutations:ge,actions:fe};s.ZP.use(v.ZP);var we=new v.ZP.Store({state:{collapsed:!1},mutations:{SET_COLLAPSED(t,e){t.collapsed=e}},getters:zt,modules:{app:Ut,perpetual:ye,...he}});a(62467);s.ZP.config.productionTip=!1,s.ZP.use(T.ZP),new s.ZP({router:Dt,store:we,render:t=>t(z)}).$mount("#app")},86717:function(t,e,a){"use strict";var s=a(91097);class n{constructor(){}add(t,e){return new s.Z(t).plus(new s.Z(e)).toString()}subtract(t,e){return new s.Z(t).minus(new s.Z(e)).toString()}multiply(t,e){return new s.Z(t).multipliedBy(new s.Z(e)).toString()}divide(t,e){return new s.Z(t).dividedBy(new s.Z(e)).toString()}}e["Z"]=n},12873:function(t,e,a){"use strict";a.d(e,{I$:function(){return s},PL:function(){return n},Yy:function(){return o},gQ:function(){return i},tZ:function(){return r}});const s=.6,n=10**12,i=10**6,o=10**18,r=10**6},54334:function(t,e,a){"use strict";t.exports=a.p+"img/fa-bath-white.5cf6f161.svg"},42777:function(t,e,a){"use strict";t.exports=a.p+"img/fa-bath.61a383d3.svg"},69574:function(t,e,a){"use strict";t.exports=a.p+"img/logo.66443b6e.svg"},87461:function(t,e,a){"use strict";t.exports=a.p+"img/logo_s.ed3ba24e.svg"},99171:function(t,e,a){"use strict";t.exports=a.p+"img/mm-logo.abd25543.svg"},28550:function(t){"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAcCAYAAAATFf3WAAAAAXNSR0IArs4c6QAAAIlJREFUWEftl8ENgDAMA5vCl0xAt2CR8oZxGKI7wUotUh8wgIkUIedvK7pEdSOacgtOS6QtwgaB6ZAgAK9LO8FpXgtqZKUf63CIlflXvmwQJUmCMEFN+UJNrPQ1ho1Rh9Bl1CH0nqjTlE/UyEpfY9j5DqJ0SfD/BN1/WHnVAUvIqAPgvVed9x28AcuwMEOjUWM5AAAAAElFTkSuQmCC"},29732:function(t){"use strict";t.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"_usdAmount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_clpAmount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},40625:function(t){"use strict";t.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"},{"internalType":"uint8","name":"decimals_","type":"uint8"},{"internalType":"address","name":"owner_","type":"address"},{"internalType":"uint256","name":"totalSupply_","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},65898:function(t){"use strict";t.exports=JSON.parse('[{"inputs":[],"name":"POSITION_PRECISE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PRICE_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PRICE_TO_USD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"RATE_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"USD_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"allIndexTokens","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"clearingMarginRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"collateral","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"errors","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"gov","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"initialized","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"liquidateFeeRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lpFeeRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"oracle","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"platformFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"positions","outputs":[{"internalType":"uint256","name":"collateral","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"uint256","name":"averagePrice","type":"uint256"},{"internalType":"uint256","name":"fundingFeeRate","type":"uint256"},{"internalType":"int256","name":"releasePnl","type":"int256"},{"internalType":"uint8","name":"leverage","type":"uint8"},{"internalType":"bool","name":"direction","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"reserveAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"transactionFeeRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"usd","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"vaultUtil","outputs":[{"internalType":"contract IVaultUtils","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_gov","type":"address"},{"internalType":"address","name":"_oracle","type":"address"},{"internalType":"address","name":"_usd","type":"address"},{"internalType":"address","name":"_vaultUtil","type":"address"},{"internalType":"address","name":"_feeOwner","type":"address"},{"internalType":"address","name":"_clp","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newOracle","type":"address"}],"name":"setOracle","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_feeOwner","type":"address"}],"name":"setFeeOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"bool","name":"_allow","type":"bool"}],"name":"setIndexToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_clearingMarginRate","type":"uint256"}],"name":"setClearingMarginRate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_liquidateFeeRate","type":"uint256"}],"name":"setLiquidateFeeRate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_transactionFeeRate","type":"uint256"}],"name":"setTransactionFeeRate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_lpFeeRate","type":"uint256"}],"name":"setLpFeeRate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"allIndexTokensLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_receiver","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdrawFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_errorCode","type":"uint256"},{"internalType":"string","name":"_error","type":"string"}],"name":"setError","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"bool","name":"_collateralDeltaInIO","type":"bool"}],"name":"updateCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"uint8","name":"_leverage","type":"uint8"},{"internalType":"uint256","name":"_sizeDelta","type":"uint256"},{"internalType":"uint256","name":"_collateralDelta","type":"uint256"},{"internalType":"uint256","name":"_indexPrice","type":"uint256"},{"internalType":"bool","name":"_direction","type":"bool"},{"internalType":"bool","name":"_collateralDeltaInIO","type":"bool"}],"name":"updatePosition","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"address","name":"_account","type":"address"}],"name":"liquidatePosition","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_indexToken","type":"address"},{"internalType":"bool","name":"_report","type":"bool"}],"name":"updateFundingRate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_time","type":"uint256"}],"name":"updateFundingRateTest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_indexToken","type":"address"}],"name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_indexToken","type":"address"}],"name":"globalData","outputs":[{"internalType":"uint256","name":"lastFundingFeeTime","type":"uint256"},{"internalType":"uint256[2]","name":"size","type":"uint256[2]"},{"internalType":"uint256[2]","name":"averagePrice","type":"uint256[2]"},{"internalType":"uint256[2]","name":"fundingFeeRate","type":"uint256[2]"},{"internalType":"bool","name":"allow","type":"bool"}],"stateMutability":"view","type":"function"}]')},2809:function(t){"use strict";t.exports=JSON.parse('[{"inputs":[],"name":"assets","outputs":[{"internalType":"uint256","name":"aum","type":"uint256"},{"internalType":"uint256","name":"reserveAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,i){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],i=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,s){return a.f[s](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/about.398a06c2.js"}}(),function(){a.miniCssF=function(t){return"css/about.0037deee.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="clearprotocol:";a.l=function(s,n,i,o){if(t[s])t[s].push(n);else{var r,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==e+i){r=d;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",e+i),r.src=s),t[s]=[n];var p=function(e,a){r.onerror=r.onload=null,clearTimeout(m);var n=t[s];if(delete t[s],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((function(t){return t(a)})),e)return e(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,a,s,n){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var o=function(a){if(i.onerror=i.onload=null,"load"===a.type)s();else{var o=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=r,i.parentNode.removeChild(i),n(l)}};return i.onerror=i.onload=o,i.href=e,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},e=function(t,e){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var n=a[s],i=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===t||i===e))return n}var o=document.getElementsByTagName("style");for(s=0;s<o.length;s++){n=o[s],i=n.getAttribute("data-href");if(i===t||i===e)return n}},s=function(s){return new Promise((function(n,i){var o=a.miniCssF(s),r=a.p+o;if(e(o,r))return n();t(s,r,null,n,i)}))},n={143:0};a.f.miniCss=function(t,e){var a={443:1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=s(t).then((function(){n[t]=0}),(function(e){throw delete n[t],e})))}}}(),function(){var t={143:0};a.f.j=function(e,s){var n=a.o(t,e)?t[e]:void 0;if(0!==n)if(n)s.push(n[2]);else{var i=new Promise((function(a,s){n=t[e]=[a,s]}));s.push(n[2]=i);var o=a.p+a.u(e),r=new Error,l=function(s){if(a.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var i=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;r.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,n[1](r)}};a.l(o,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,i,o=s[0],r=s[1],l=s[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var u=l(a)}for(e&&e(s);c<o.length;c++)i=o[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},s=self["webpackChunkclearprotocol"]=self["webpackChunkclearprotocol"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(42878)}));s=a.O(s)})();
//# sourceMappingURL=app.850ee3c1.js.map