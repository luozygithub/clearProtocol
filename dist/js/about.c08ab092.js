"use strict";(self["webpackChunkclearprotocol"]=self["webpackChunkclearprotocol"]||[]).push([[443],{50969:function(t,s,a){a.r(s),a.d(s,{default:function(){return b}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pool-view"},[s("div",{staticClass:"pool-contain"},[t._m(0),s("div",{staticClass:"pool-content"},[s("div",{staticClass:"pool-content-left"},[s("div",{staticClass:"input-name"},[t._v(" Asset ")]),s("div",{staticClass:"input-box usdc"},[t._v(" Tether US USDC ")]),s("div",{staticClass:"input-name"},[t._v(" Amount ")]),s("div",{staticClass:"input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",step:"any",placeholder:"0.00"},domProps:{value:t.amount},on:{input:function(s){s.target.composing||(t.amount=s.target.value)}}}),s("button",{staticClass:"max-btn",on:{click:function(s){t.amount=t.balance}}},[t._v(" MAX ")]),s("span",[t._v(" USDC ")])]),s("div",{staticClass:"input-bottom"},[s("div",{staticClass:"left"},[t._v(" Wallet ")]),s("div",{staticClass:"right"},[t._v(" "+t._s(t.balance)+" "),s("span",[t._v("USDC")])])]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.usdcAllowance<10||t.usdcAllowance<t.amount,expression:"usdcAllowance<10||usdcAllowance<amount"}],staticClass:"operate",on:{click:t.approve}},[t._v(" Approve ")]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.usdcAllowance>10||t.usdcAllowance>t.amount,expression:"usdcAllowance>10||usdcAllowance>amount"}],staticClass:"operate",on:{click:t.add}},[t._v(" Add ")])]),s("div",{staticClass:"pool-content-right"},[t._m(1),s("div",{staticClass:"info-list"},[t._m(2),t._m(3),t._m(4),s("div",{staticClass:"list-item"},[s("div",{staticClass:"name"},[t._v(" Available ")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.canWithdrawNum))]),t._v(" USDC "),s("div",{staticClass:"info"},[s("button",{staticClass:"operate",class:{active:t.canWithdrawNum>0},attrs:{disabled:t.canWithdrawNum<=0},on:{click:function(s){t.isShowWithdraw=!0}}},[t._v(" Withdraw ")])])])])])])])]),s("Withdraw",{directives:[{name:"show",rawName:"v-show",value:t.isShowWithdraw,expression:"isShowWithdraw"}],attrs:{CLPBlance:t.CLPBlance,canWN:t.canWithdrawNum},on:{closeWithdraw:function(s){t.isShowWithdraw=!1}}})],1)},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"pool-view-header"},[s("div",{staticClass:"title"},[t._v(" Add Liquidity ")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"info-box"},[s("div",{staticClass:"info-item"},[s("div",{staticClass:"name"},[t._v(" Pool Size ")]),s("div",{staticClass:"value"},[s("span",[t._v("0.0000")]),t._v(" USDC ")]),s("div",{staticClass:"add"},[t._v(" Adding ")])]),s("div",{staticClass:"info-item"},[s("div",{staticClass:"name"},[t._v(" Rewards/1K ")]),s("div",{staticClass:"value"},[s("span",[t._v("0.00")]),t._v(" USDC ")]),s("div",{staticClass:"add",staticStyle:{color:"#63CE63"}},[t._v(" Est. Rewards ")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"list-item"},[s("div",{staticClass:"name"},[t._v(" Total Balance ")]),s("div",{staticClass:"item-content"},[s("span",[t._v("0.0000")]),t._v(" USDC ")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"list-item"},[s("div",{staticClass:"name"},[t._v(" PNL ")]),s("div",{staticClass:"item-content"},[s("span",[t._v("0.0000")]),t._v(" USDC "),s("div",{staticClass:"info"},[t._v(" Add to earn rewards ")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"list-item"},[s("div",{staticClass:"name"},[t._v(" Executed ")]),s("div",{staticClass:"item-content"},[s("span",[t._v("0.0000")]),t._v(" USDC ")])])}],n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"withdraw"},[s("div",{staticClass:"mask"}),s("div",{staticClass:"margin-content"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v(" Withdraw ")]),s("svg",{staticClass:"icon close",attrs:{t:"1677826899914",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5251",id:"mx_n_1677826899918",width:"14",height:"14"},on:{click:function(s){return t.$emit("closeWithdraw")}}},[s("path",{attrs:{d:"M570.514286 512l292.571428-292.571429c14.628571-14.628571 14.628571-43.885714 0-58.514285-14.628571-14.628571-43.885714-14.628571-58.514285 0l-292.571429 292.571428-292.571429-292.571428c-14.628571-14.628571-43.885714-14.628571-58.514285 0-21.942857 14.628571-21.942857 43.885714 0 58.514285l292.571428 292.571429-292.571428 292.571429c-14.628571 14.628571-14.628571 43.885714 0 58.514285 14.628571 14.628571 43.885714 14.628571 58.514285 0l292.571429-292.571428 292.571429 292.571428c14.628571 14.628571 43.885714 14.628571 58.514285 0 14.628571-14.628571 14.628571-43.885714 0-58.514285l-292.571428-292.571429z",fill:"#0E1D51","p-id":"5252"}})])]),s("div",{staticClass:"content"},[s("div",{staticClass:"input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{step:"any",type:"number",placeholder:"0.000"},domProps:{value:t.amount},on:{input:function(s){s.target.composing||(t.amount=s.target.value)}}}),s("div",{staticClass:"max-btn",on:{click:function(s){t.amount=t.canWN}}},[t._v(" MAX ")])]),s("div",{staticClass:"balance"},[t._v(" Max:"+t._s(t.canWN)+" ")]),s("button",{staticClass:"operate confim",on:{click:t.withdraw}},[t._v(" Confirm ")])])])])},c=[],o=a(12873),l=a(91097),d={name:"withdrawView",data(){return{amount:void 0,balance:0}},props:["canWN","CLPBlance"],methods:{withdraw(){if(!this.amount||this.amount<=0)return void this.$message.info("Please input amount");let t=parseFloat((0,l.Z)(this.amount*o.Yy).toFixed(0))>this.CLPBlance?this.CLPBlance:(0,l.Z)(this.amount*o.Yy).toFixed(0);this.$store.dispatch("CLP/burn",{_clpAmount:t}).then((()=>{this.$message.success("Withdraw success"),this.amount=0})).catch((t=>{console.log(t),this.$message.info(t)}))}}},u=d,r=a(1001),v=(0,r.Z)(u,n,c,!1,null,"ac3d2c5e",null),h=v.exports,m=a(63822),p=a(65946),C=a(86717),w=new C.Z,_={name:"PoolView",components:{Withdraw:h},data(){return{usdcAllowance:0,amount:void 0,balance:0,isShowWithdraw:!1,CLPTotalSupply:0,CLPBlance:0,Aum:0}},computed:{...(0,m.Se)(["isConnected","account"]),canWithdrawNum(){let t=0;return this.CLPTotalSupply>0&&(t=(0,l.Z)(w.divide(w.divide(w.multiply(this.CLPBlance,this.Aum),o.PL),this.CLPTotalSupply)).toFixed(4)),t}},watch:{account(){this.getData()}},methods:{async getAum(){let t=await this.$store.dispatch("vaultUtil/getAum");this.Aum=t},async getTotalSupply(){let t=await this.$store.dispatch("CLP/totalSupply");console.log(t),this.CLPTotalSupply=t},async CLPBlanceOf(){let t=await this.$store.dispatch("CLP/balanceOf",{account:this.account});this.CLPBlance=t},async allowance(){if(!this.isConnected)return;let t=await this.$store.dispatch("erc20/allowance",{address:p.Z.usdt,spender:p.Z.CLP,owner:this.account});t>0&&(this.usdcAllowance=parseInt(t)/10**6)},approve(){this.isConnected?this.$store.dispatch("erc20/approve",{address:p.Z.usdt,spender:p.Z.CLP,amount:this.$store.state.app.web3.utils.toWei((10**10).toString()).toString()}).then((()=>{this.allowance()})):this.$message.info("Please connect")},async getBalance(){if(!this.isConnected)return;let t=await this.$store.dispatch("erc20/balanceOf",{address:p.Z.usdt,account:this.$store.state.app.account});this.balance=(0,l.Z)(t/o.gQ).toFixed(2)},add(){!this.amount||this.amount<=0?this.$message.info("Please input amount"):this.$store.dispatch("CLP/mint",{_usdAmount:this.amount}).then((()=>{this.$message.success("Add success"),this.getData()})).catch((t=>{this.$message.info(t)}))},getData(){this.isConnected&&(this.allowance(),this.getBalance(),this.getAum(),this.getTotalSupply(),this.CLPBlanceOf())}},created(){this.getData()}},f=_,g=(0,r.Z)(f,i,e,!1,null,"d4b36678",null),b=g.exports}}]);
//# sourceMappingURL=about.c08ab092.js.map